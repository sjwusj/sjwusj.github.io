{"title":"Android_Day9","uid":"35c62650c1bf7b38efffc0a7332ce550","slug":"Android-Day9","date":"2024-04-27T23:54:41.000Z","updated":"2024-11-15T12:52:55.789Z","comments":true,"path":"api/articles/Android-Day9.json","keywords":null,"cover":"cover/cover3.jpg","content":"<h1 id=\"Android的权限\"><a href=\"#Android的权限\" class=\"headerlink\" title=\"Android的权限\"></a>Android的权限</h1><h2 id=\"课程目标\"><a href=\"#课程目标\" class=\"headerlink\" title=\"课程目标\"></a>课程目标</h2><p>了解android是如何进行权限管理的</p>\n<p>了解如何申请系统权限</p>\n<p>了解如何给自己的app增加权限控制</p>\n<h2 id=\"一、认识Android权限\"><a href=\"#一、认识Android权限\" class=\"headerlink\" title=\"一、认识Android权限\"></a>一、认识Android权限</h2><h3 id=\"1、权限是什么，为什么需要权限管理\"><a href=\"#1、权限是什么，为什么需要权限管理\" class=\"headerlink\" title=\"1、权限是什么，为什么需要权限管理\"></a>1、权限是什么，为什么需要权限管理</h3><ul>\n<li>权限是指对于某些资源或操作访问和使用的能力</li>\n<li>Android系统设置权限的目的是<strong>保护用户的隐私</strong></li>\n</ul>\n<h3 id=\"2、权限的类型\"><a href=\"#2、权限的类型\" class=\"headerlink\" title=\"2、权限的类型\"></a>2、权限的类型</h3><h4 id=\"普通权限-normal-permission\"><a href=\"#普通权限-normal-permission\" class=\"headerlink\" title=\"普通权限(normal permission)\"></a>普通权限(normal permission)</h4><p>也叫正常权限，即使拥有了该类权限，对用户隐私或其他应用程序的操作几乎没有风险。</p>\n<p>此类权限只需要在AndroidMainfeast中声明，则默认获取该权限</p>\n<p><strong>系统会在安装时自动授予该权限，系统不提示用户授予正常权限，用户也不能撤销这些权限。</strong></p>\n<p><img src=\"/img/image-20240428082129300.png\" alt=\"image-20240428082129300\"></p>\n<h4 id=\"敏感权限-dangerous-permission\"><a href=\"#敏感权限-dangerous-permission\" class=\"headerlink\" title=\"敏感权限(dangerous permission)\"></a>敏感权限(dangerous permission)</h4><p>也叫危险权限，需要涉及用户私人信息的数据或资源的区域，也包括可能影响用户存储的数据或其他应用程序的操作的区域。</p>\n<p>运行时权限，跟普通权限相反，一旦某个应该获取了该类权限，用户的隐私数据就面临被泄露篡改的风险</p>\n<p><img src=\"/img/image-20240428082601132.png\" alt=\"image-20240428082601132\"></p>\n<h3 id=\"3、权限组\"><a href=\"#3、权限组\" class=\"headerlink\" title=\"3、权限组\"></a>3、权限组</h3><p>Android系统对所有的危险权限进行了分组，称为<strong>权限组</strong></p>\n<p><img src=\"/img/image-20240428083011284.png\" alt=\"image-20240428083011284\"></p>\n<p><strong>如果应用程序当前在权限组中没有任何权限，则系统向描述应用程序希望访问的权限组的用户显示权限请求对话框。对话框没有描述该组中的特定权限。</strong></p>\n<p>例如，如果一个应用程序请求READ_CONTACTS权限，系统对话框只告诉应用程序需要访问设备的联系人。如果用户给予批准，系统只会给应用程序它所请求的权限。</p>\n<p><strong>如果应用程序已经在同一权限组中被授予了另一个危险权限，系统会立即授予该权限，而不与用户进行任何交互。</strong></p>\n<p>例如，如果一个应用程序之前请求并被授予了READ_CONTACTS权限，然后它请求WRITE_CONTACTS，系统立即授予该权限，而不向用户显示权限对话框。</p>\n<h3 id=\"4、系统有哪些权限\"><a href=\"#4、系统有哪些权限\" class=\"headerlink\" title=\"4、系统有哪些权限\"></a>4、系统有哪些权限</h3><p><img src=\"/img/image-20240428083712783.png\" alt=\"image-20240428083712783\"></p>\n<h3 id=\"5、权限在不同Android版本差异\"><a href=\"#5、权限在不同Android版本差异\" class=\"headerlink\" title=\"5、权限在不同Android版本差异\"></a>5、权限在不同Android版本差异</h3><p><img src=\"/img/image-20240428084322109.png\" alt=\"image-20240428084322109\"></p>\n<h3 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a>小结</h3><ul>\n<li><p>隐私需要所以有权限控制，相似权限分为权限组</p>\n</li>\n<li><p>权限根据敏感程度分为普通权限与敏感权限</p>\n</li>\n<li><p>超过10+系统组，100+个系统权限</p>\n</li>\n</ul>\n<h2 id=\"二、如何请求权限\"><a href=\"#二、如何请求权限\" class=\"headerlink\" title=\"二、如何请求权限\"></a>二、如何请求权限</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>注意：要申请什么权限，一定要先在AndroidManifest.xml中申明</p></blockquote>\n<h3 id=\"一-向清单文件添加权限\"><a href=\"#一-向清单文件添加权限\" class=\"headerlink\" title=\"(一)向清单文件添加权限\"></a>(一)向清单文件添加权限</h3><p>应用程序必须通过在清单文件（<strong>AndroidManifest.xml</strong>）中使用<uses-permission>标记来公布它需要的权限</p>\n<p>无论应用需要什么权限，都需要在清单文件中对权限进行声明</p>\n<p><img src=\"/img/image-20240428090444488.png\" alt=\"image-20240428090444488\"></p>\n<h3 id=\"二-检查权限\"><a href=\"#二-检查权限\" class=\"headerlink\" title=\"(二)检查权限\"></a>(二)检查权限</h3><p>如果应用需要一项危险权限，那么每次执行需要该权限的操作时，都必须检查自己是否具有该权限。从Android6.0（API级别23）开始，用户可随时从任何应用撤消权限</p>\n<p>要检查应用是否具有某项权限，请调用**ContextCompat.checkSelfPermission()**方法。例如，以下代码段展示了如何检查Activity是否具有向日历写入数据的权限：</p>\n<p>注意：import android.Manifest;</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ContextCompat</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">checkSelfPermission</span><span style=\"color: #89DDFF\">(this,</span><span style=\"color: #BABED8\"> Manifest</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">permission</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">WRITE_CALENDAR</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\">PackageManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">PERMISSION_DENIED</span><span style=\"color: #89DDFF\">)&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h3 id=\"三-请求权限\"><a href=\"#三-请求权限\" class=\"headerlink\" title=\"(三)请求权限\"></a>(三)请求权限</h3><p>Android提供了几种可用来请求权限的方法(如requestPermissions(),shouldShowRequestPermissionRationale,requestPermissionsFromFragment)。</p>\n<p>在某些情况下，需要帮助用户理解为什么应用需要某项权限。在应用请求权限之前如果想要向用户提供解释该权限的概念，可以调用shouldShowRequestPermissionRationale()方法来实现</p>\n<p><img src=\"/img/image-20240428091727786.png\" alt=\"image-20240428091727786\"></p>\n<h3 id=\"四-处理权限请求响应\"><a href=\"#四-处理权限请求响应\" class=\"headerlink\" title=\"(四)处理权限请求响应\"></a>(四)处理权限请求响应</h3><p><img src=\"/img/image-20240428093555626.png\" alt=\"image-20240428093555626\"></p>\n<h3 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h3><div class=\"language-xml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">xml</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">uses-permission</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">android</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #C792EA\">name</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">android.permission.READ_CONTACTS</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">/&gt;</span></span></code></pre></div><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Class0428MainActivity</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">extends</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">AppCompatActivity</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">final</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> MY_PERMISSIONS_REQUEST_READ_CONTACTS </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">200</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">protected</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">onCreate</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Bundle</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">savedInstanceState</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        super</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">onCreate</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">savedInstanceState</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #82AAFF\">setContentView</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">R</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">layout</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">class_0428_activity_main</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #82AAFF\">testPermission</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testPermission</span><span style=\"color: #89DDFF\">()&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ContextCompat</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">checkSelfPermission</span><span style=\"color: #89DDFF\">(this,</span><span style=\"color: #BABED8\"> Manifest</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">permission</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">READ_CONTACTS</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\">PackageManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">PERMISSION_GRANTED</span><span style=\"color: #89DDFF\">)&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">                </span><span style=\"color: #676E95; font-style: italic\">//请求权限</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                ActivityCompat</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">requestPermissions</span><span style=\"color: #89DDFF\">(this,</span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">[]&#123;</span><span style=\"color: #BABED8\">Manifest</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">permission</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">READ_CONTACTS</span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                        MY_PERMISSIONS_REQUEST_READ_CONTACTS</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">onRequestPermissionsResult</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">requestCode</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">permissions</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">grantResults</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        super</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">onRequestPermissionsResult</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">requestCode</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> permissions</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> grantResults</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">requestCode</span><span style=\"color: #89DDFF\">)&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> MY_PERMISSIONS_REQUEST_READ_CONTACTS</span><span style=\"color: #89DDFF; font-style: italic\">:</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">grantResults</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">length</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #BABED8\">grantResults</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]==</span><span style=\"color: #BABED8\">PackageManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">PERMISSION_GRANTED</span><span style=\"color: #89DDFF\">)&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    Toast</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">makeText</span><span style=\"color: #89DDFF\">(this,</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">权限申请成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">Toast</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">LENGTH_SHORT</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">show</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    Toast</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">makeText</span><span style=\"color: #89DDFF\">(this,</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">权限申请失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">Toast</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">LENGTH_SHORT</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">show</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h3 id=\"效果\"><a href=\"#效果\" class=\"headerlink\" title=\"效果\"></a>效果</h3><img src=\"img/image-20240428132812139.png\" alt=\"image-20240428132812139\" style=\"zoom:67%;\" />\n\n\n\n<h2 id=\"三、自定义权限\"><a href=\"#三、自定义权限\" class=\"headerlink\" title=\"三、自定义权限\"></a>三、自定义权限</h2><p>应用程序可以自定义权限来提供给其他应用程序访问自己的功能要自定义权限，可以在AndroidManifest.xml中使用<permission>标签来声明</p>\n<p><img src=\"/img/image-20240428133058834.png\" alt=\"image-20240428133058834\"></p>\n<p><img src=\"/img/image-20240428133108707.png\" alt=\"image-20240428133108707\"></p>\n<p><img src=\"/img/image-20240428133212335.png\" alt=\"image-20240428133212335\"></p>\n<p><strong>自定义权限注意点：</strong></p>\n<p>1.Android不允许两个不同的应用定义一个相同名字的权限（除非这两个应用拥有相同的签名)</p>\n<p>2.和应用安装顺序的关系</p>\n<p>场景：App A中声明了权限PermissionA,AppB中使用了权限PermissionA。</p>\n<p>情况一：PermissionA的保护级别是normal或者dangerous App B先安装，App A后安装，此时AppB无法获取PermissionA的权限，从AppB打开AppA会报权限错误App A先安装，App B后安装，从App B打开AppA一切正常</p>\n<h2 id=\"四、相机权限申请练习\"><a href=\"#四、相机权限申请练习\" class=\"headerlink\" title=\"四、相机权限申请练习\"></a>四、相机权限申请练习</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>运行时权限申请</p></blockquote>\n<p><img src=\"/img/image-20240428133226213.png\" alt=\"image-20240428133226213\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>点击按钮申请相机权限，同意打开相机，拒绝关闭</p></blockquote>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #82AAFF\">findViewById</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">R</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">id</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">btn_camera</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">setOnClickListener</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> View</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">OnClickListener</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">onClick</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">View</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">getCameraPermission</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;);</span></span></code></pre></div><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">* 打开相机</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">*/</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">startCamera</span><span style=\"color: #89DDFF\">()&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">Intent</span><span style=\"color: #BABED8\"> intent </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Intent</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">MediaStore</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">ACTION_IMAGE_CAPTURE</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  intent</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">addFlags</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">Intent</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">FLAG_GRANT_WRITE_URI_PERMISSION</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #82AAFF\">startActivity</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">intent</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">getCameraPermission</span><span style=\"color: #89DDFF\">()&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ContextCompat</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">checkSelfPermission</span><span style=\"color: #89DDFF\">(this,</span><span style=\"color: #BABED8\"> Manifest</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">permission</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">CAMERA</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\">PackageManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">PERMISSION_GRANTED</span><span style=\"color: #89DDFF\">)&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">//没有相机权限就申请</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ActivityCompat</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">requestPermissions</span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">this,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">[]&#123;</span><span style=\"color: #BABED8\">Manifest</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">permission</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">CAMERA</span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      MY_PERMISSIONS_REQUEST_READ_CONTACTS</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">//有权限就打开相机</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">startCamera</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">onRequestPermissionsResult</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> requestCode</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\"> permissions</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\"> grantResults</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  super</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">onRequestPermissionsResult</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">requestCode</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> permissions</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> grantResults</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">requestCode</span><span style=\"color: #89DDFF\">)&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> MY_PERMISSIONS_REQUEST_READ_CONTACTS</span><span style=\"color: #89DDFF; font-style: italic\">:</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">grantResults</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">length</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #BABED8\">grantResults</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]==</span><span style=\"color: #BABED8\">PackageManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">PERMISSION_GRANTED</span><span style=\"color: #89DDFF\">)&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">//权限申请成功并打开相机</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #82AAFF\">startCamera</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Toast</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">makeText</span><span style=\"color: #89DDFF\">(this,</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">权限申请成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">Toast</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">LENGTH_SHORT</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">show</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Toast</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">makeText</span><span style=\"color: #89DDFF\">(this,</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">权限申请失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">Toast</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">LENGTH_SHORT</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">show</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h3 id=\"课堂练习\"><a href=\"#课堂练习\" class=\"headerlink\" title=\"课堂练习\"></a>课堂练习</h3><p>1.申请SD卡读取权限</p>\n<p>2.拨打电话demo</p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">     * 获取电话权限</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">getPhonePermission</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ContextCompat</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">checkSelfPermission</span><span style=\"color: #89DDFF\">(this,</span><span style=\"color: #BABED8\"> Manifest</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">permission</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">CALL_PHONE</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> PackageManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">PERMISSION_GRANTED</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ActivityCompat</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">requestPermissions</span><span style=\"color: #89DDFF\">(this,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">[]&#123;</span><span style=\"color: #BABED8\">Manifest</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">permission</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">CALL_PHONE</span><span style=\"color: #89DDFF\">&#125;,</span><span style=\"color: #BABED8\"> MY_PERMISSIONS_REQUEST_READ_CONTACTS</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">startPhone</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">     * 打开电话</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">startPhone</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">Uri</span><span style=\"color: #BABED8\"> uri </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> Uri</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">parse</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">tel:10086</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">Intent</span><span style=\"color: #BABED8\"> intent </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Intent</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">Intent</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">ACTION_DIAL</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> uri</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #82AAFF\">startActivity</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">intent</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">onRequestPermissionsResult</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> requestCode</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\"> permissions</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\"> grantResults</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        super</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">onRequestPermissionsResult</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">requestCode</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> permissions</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> grantResults</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">requestCode</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> MY_PERMISSIONS_REQUEST_READ_CONTACTS</span><span style=\"color: #89DDFF; font-style: italic\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">grantResults</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">length </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #BABED8\"> grantResults</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> PackageManager</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">PERMISSION_GRANTED</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #82AAFF\">startPhone</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    Toast</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">makeText</span><span style=\"color: #89DDFF\">(this,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">权限申请成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> Toast</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">LENGTH_SHORT</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">show</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    Toast</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">makeText</span><span style=\"color: #89DDFF\">(this,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">权限申请失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> Toast</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">LENGTH_SHORT</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">show</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><ul>\n<li><p>认识权限，<strong>权限用处，权限组</strong></p>\n</li>\n<li><p>权限的类型：<strong>普通，敏感</strong></p>\n</li>\n<li><p>权限在不同android版本中的差异：是否需要用户确认</p>\n</li>\n</ul>\n<p>&#x3D;&#x3D;如何声明权限：<uses-permission>&#x3D;&#x3D;</p>\n<ul>\n<li>如何代码中申请权限：</li>\n</ul>\n<p>&#x3D;&#x3D;requestPermissions&#x2F;shouldShowRequestPermissionRationale&#x3D;&#x3D;</p>\n<ul>\n<li>代码中如何使用自定义权限：permision</li>\n</ul>\n<h1 id=\"Android的HTTP请求\"><a href=\"#Android的HTTP请求\" class=\"headerlink\" title=\"Android的HTTP请求\"></a>Android的HTTP请求</h1><p><a href=\"https://www.runoob.com/w3cnote/android-tutorial-http.html\">Android网络编程要学的东西与Http协议学习</a></p>\n<h2 id=\"课程目标-1\"><a href=\"#课程目标-1\" class=\"headerlink\" title=\"课程目标\"></a>课程目标</h2><ul>\n<li><p>学习使用OkHttp进行网络请求，掌握Android客户端网络请求框架封装</p>\n</li>\n<li><p>更进一步掌握Android知识技能，能够独立完成Android项目开发</p>\n</li>\n<li><p>提升学员们Android基础技能，筛选优秀毕业生加入小米团队中</p>\n</li>\n</ul>\n<h2 id=\"一、HTTP请求类型\"><a href=\"#一、HTTP请求类型\" class=\"headerlink\" title=\"一、HTTP请求类型\"></a>一、HTTP请求类型</h2><p><img src=\"/img/image-20240428144021562.png\" alt=\"image-20240428144021562\"></p>\n<h3 id=\"Get请求\"><a href=\"#Get请求\" class=\"headerlink\" title=\"Get请求\"></a>Get请求</h3><p>1.从服务端获取数据</p>\n<p>2.在安全性问题方面，参数会拼接在url后面，用&#x3D;&#x3D;？&#x3D;&#x3D;来分割，内容必须是k&#x3D;v，对个参数用&#x3D;&#x3D;&amp;&#x3D;&#x3D;来链接此时页面将能收到这些参数</p>\n<p>3.提交的数据最多只能有1024字节</p>\n<p>4.get请求的是静态资源，则会缓存</p>\n<p>例如：<a href=\"https://www.google.com.hk/search?q=Android&newwindow=1\">https://www.google.com.hk/search?q=Android&amp;newwindow=1</a></p>\n<h3 id=\"Post请求\"><a href=\"#Post请求\" class=\"headerlink\" title=\"Post请求\"></a>Post请求</h3><p>1.post请求向服务端写入数据</p>\n<p>2.post请求更安全，参数不会作为url的一部分，而是放在requestbody中传递</p>\n<p>3.post请求发送的数据长度没有限制</p>\n<h3 id=\"Post请求状态码\"><a href=\"#Post请求状态码\" class=\"headerlink\" title=\"Post请求状态码\"></a>Post请求状态码</h3><p><img src=\"/img/image-20240428145213977.png\" alt=\"image-20240428145213977\"></p>\n<p><img src=\"/img/image-20240428145335988.png\" alt=\"image-20240428145335988\"></p>\n<p><img src=\"/img/image-20240428145359192.png\" alt=\"image-20240428145359192\"></p>\n<h2 id=\"二、HTTP请求API变迁\"><a href=\"#二、HTTP请求API变迁\" class=\"headerlink\" title=\"二、HTTP请求API变迁\"></a>二、HTTP请求API变迁</h2><p><img src=\"/img/image-20240428151032316.png\" alt=\"image-20240428151032316\"></p>\n<p><img src=\"/img/image-20240428151209937.png\" alt=\"image-20240428151209937\"></p>\n<p><img src=\"/img/image-20240428151421338.png\" alt=\"image-20240428151421338\"></p>\n<ul>\n<li>OkHttp</li>\n</ul>\n<p><img src=\"/img/image-20240428151448517.png\" alt=\"image-20240428151448517\"></p>\n<p><img src=\"/img/image-20240428151738941.png\" alt=\"image-20240428151738941\"></p>\n<h2 id=\"三、OKHTTP\"><a href=\"#三、OKHTTP\" class=\"headerlink\" title=\"三、OKHTTP\"></a>三、OKHTTP</h2><p><a href=\"https://blog.csdn.net/shulianghan/article/details/118093870\">【OkHttp】Android 项目导入 OkHttp ( 配置依赖 | 配置 networkSecurityConfig | 配置 ViewBinding | 代码示例 )</a></p>\n<p><a href=\"https://blog.csdn.net/fightingXia/article/details/70554354\">开启子线程的方法</a></p>\n<p><a href=\"https://blog.csdn.net/qq_42609613/article/details/122984566\">Android 主线程与子线程区分和实践</a></p>\n<h3 id=\"OkHttp使用\"><a href=\"#OkHttp使用\" class=\"headerlink\" title=\"OkHttp使用\"></a>OkHttp使用</h3><h4 id=\"同步网络请求\"><a href=\"#同步网络请求\" class=\"headerlink\" title=\"同步网络请求\"></a>同步网络请求</h4><p>进行get同步网络请求(网络请求可能是一个耗时较长的过程，一般&#x3D;&#x3D;不允许在主线程中开启&#x3D;&#x3D;网络请求)</p>\n<p>1.build.gradle中添加依赖语句</p>\n<p>2.创建OkhttpClinet，Request对象</p>\n<p>3.使用call对象的execute方法开始网络请求</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>要在子线程中使用</p></blockquote>\n<p>使用Thread类开启子线程一共分为三步：</p>\n<ol>\n<li>创建Thread的子类对象。</li>\n<li>重写run方法。</li>\n<li>调用start方法开启子线程。<br> 此时就开启了子线程，run方法执行在子线程中。</li>\n</ol>\n<p><img src=\"/img/image-20240428152153208.png\" alt=\"image-20240428152153208\"></p>\n<ul>\n<li>引入依赖</li>\n</ul>\n<div class=\"language-kotlin\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">kotlin</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">implementation</span><span style=\"color: #BABED8\"> (</span><span style=\"color: #C3E88D\">&quot;com.squareup.okhttp3:okhttp:4.12.0&quot;</span><span style=\"color: #BABED8\">)</span></span></code></pre></div><ul>\n<li>使用</li>\n</ul>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\"> </span><span style=\"color: #676E95; font-style: italic\">//1、创建OkHttpClient</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">final</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">OkHttpClient</span><span style=\"color: #BABED8\"> okHttpClient </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> OkHttpClient</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Builder</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">build</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\"> /**</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">     * 测试okhttp，同步请求</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testOkHttpSynchronous</span><span style=\"color: #89DDFF\">()&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">//开启子线程</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Thread</span><span style=\"color: #89DDFF\">()&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">run</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                super</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">run</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">                </span><span style=\"color: #676E95; font-style: italic\">//是否是主线程</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #C792EA\">boolean</span><span style=\"color: #BABED8\"> currentThread </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> Thread</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">currentThread</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> Looper</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getMainLooper</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">getThread</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">                </span><span style=\"color: #676E95; font-style: italic\">//false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                Log</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">d</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">currentThread</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> String</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">valueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">currentThread</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">                </span><span style=\"color: #676E95; font-style: italic\">//2、创建Request</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #C792EA\">Request</span><span style=\"color: #BABED8\"> request </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> Request</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Builder</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                        </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">get</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                        </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">url</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://www.baidu.com/</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                        </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">build</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">                </span><span style=\"color: #676E95; font-style: italic\">//Request&#123;method=GET, url=https://www.baidu.com/&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                Log</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">d</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">request</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> String</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">valueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">request</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">try</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">                    </span><span style=\"color: #676E95; font-style: italic\">//3、同步请求</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #C792EA\">Response</span><span style=\"color: #BABED8\"> response </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> okHttpClient</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">newCall</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">request</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">execute</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">                    </span><span style=\"color: #676E95; font-style: italic\">//Response&#123;protocol=http/1.1, code=200, message=OK, url=https://www.baidu.com/&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    Log</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">d</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">response</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> String</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">valueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">response</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">catch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">IOException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF; font-style: italic\">throw</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">RuntimeException</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;.</span><span style=\"color: #82AAFF\">start</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><img src=\"/img/image-20240428160319813.png\" alt=\"image-20240428160319813\"></p>\n<h4 id=\"异步网络请求\"><a href=\"#异步网络请求\" class=\"headerlink\" title=\"异步网络请求\"></a>异步网络请求</h4><p>使用OkHttp进行get异步网络请求，异步请求的方法<strong>enqueue</strong>，调用该方法时<strong>不需要另开子线程</strong>调用，<strong>直接在主线程中执行</strong>即可</p>\n<p><img src=\"/img/image-20240428161031365.png\" alt=\"image-20240428161031365\"></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//1、创建OkHttpClient</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">final</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">OkHttpClient</span><span style=\"color: #BABED8\"> okHttpClient </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> OkHttpClient</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Builder</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">build</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">     * 测试okhttp，异步请求</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testOkHttpAsynchronous</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">//是否是主线程</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">boolean</span><span style=\"color: #BABED8\"> currentThread </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> Thread</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">currentThread</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> Looper</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getMainLooper</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">getThread</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">//true</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Log</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">d</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">currentThread</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> String</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">valueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">currentThread</span><span style=\"color: #89DDFF\">));</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">//2、创建Request</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Request</span><span style=\"color: #BABED8\"> request </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> Request</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Builder</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">get</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">url</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://www.baidu.com/</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">build</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        okHttpClient</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">newCall</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">request</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">enqueue</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Callback</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">onFailure</span><span style=\"color: #89DDFF\">(@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Call</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">call</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">IOException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                Log</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">d</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">TAG</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">网络请求失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">onResponse</span><span style=\"color: #89DDFF\">(@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Call</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">call</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Response</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">response</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">throws</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">IOException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                Log</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">d</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">TAG</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">网络请求成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><img src=\"/img/image-20240428161550503.png\" alt=\"image-20240428161550503\"></p>\n<h3 id=\"GSON-谷歌发布的一个json解析框架\"><a href=\"#GSON-谷歌发布的一个json解析框架\" class=\"headerlink\" title=\"GSON:谷歌发布的一个json解析框架\"></a>GSON:谷歌发布的一个json解析框架</h3><p><a href=\"https://blog.csdn.net/qq_40163677/article/details/112412623\">Gson的基本使用</a></p>\n<p><a href=\"https://www.jianshu.com/p/af49e31131cf\">Gson教程二（译）：嵌套对象的序列化和反序列化</a></p>\n<p><a href=\"https://www.jianshu.com/p/923a9fe78108\">Gson完全教程：基础篇</a></p>\n<div class=\"language-kotlin\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">kotlin</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">//gson</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">implementation</span><span style=\"color: #BABED8\"> (</span><span style=\"color: #C3E88D\">&quot;com.google.code.gson:gson:2.8.5&quot;</span><span style=\"color: #BABED8\">)</span></span></code></pre></div><p><img src=\"/img/image-20240428161651517.png\" alt=\"image-20240428161651517\"></p>\n<h3 id=\"OkHttp请求流程\"><a href=\"#OkHttp请求流程\" class=\"headerlink\" title=\"OkHttp请求流程\"></a>OkHttp请求流程</h3><p><img src=\"/img/image-20240428164021966.png\" alt=\"image-20240428164021966\"></p>\n<h3 id=\"Request构建\"><a href=\"#Request构建\" class=\"headerlink\" title=\"Request构建\"></a>Request构建</h3><p><img src=\"/img/image-20240428164107393.png\" alt=\"image-20240428164107393\"></p>\n<h3 id=\"RequestBody\"><a href=\"#RequestBody\" class=\"headerlink\" title=\"RequestBody\"></a>RequestBody</h3><p><img src=\"/img/image-20240428164208598.png\" alt=\"image-20240428164208598\"></p>\n<p>使用post请求相比get请求其实就是多了一个RequstBody对象来携带我们要发送给网络服务器的数据</p>\n<p>FormBody， MultipartBody就是RequestBody的一个子类对象</p>\n<p>FromBody传递的是字符串型的键值对，RequestBody传递的是多媒体使用MultipartBody同时传递键值对参数和File对象</p>\n<h3 id=\"OkHttp使用-Post请求\"><a href=\"#OkHttp使用-Post请求\" class=\"headerlink\" title=\"OkHttp使用-Post请求\"></a>OkHttp使用-Post请求</h3><h4 id=\"RequestBody使用json提交数据\"><a href=\"#RequestBody使用json提交数据\" class=\"headerlink\" title=\"RequestBody使用json提交数据\"></a>RequestBody使用json提交数据</h4><p>使用OkHttp进行Post请求，同时RequestBody使用json提交数据</p>\n<p><img src=\"/img/image-20240428164543541.png\" alt=\"image-20240428164543541\"></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">     * 使用OkHttp进行Post请求，同时RequestBody使用json提交数据</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testPostByJson</span><span style=\"color: #89DDFF\">()&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">HashMap</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">String</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> hash </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">HashMap</span><span style=\"color: #89DDFF\">&lt;&gt;();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        hash</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">put</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">phone</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">123456789</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Gson</span><span style=\"color: #BABED8\"> gson </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Gson</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">String</span><span style=\"color: #BABED8\"> json </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> gson</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">toJson</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">hash</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">RequestBody</span><span style=\"color: #BABED8\"> requestBody </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> RequestBody</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">create</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">MediaType</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">parse</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">application/json</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> json</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Request</span><span style=\"color: #BABED8\"> request </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> Request</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Builder</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">post</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">requestBody</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">addHeader</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">content-type</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">application/json</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">url</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://hotfix-service-prod.g.mi.com/quick-game/qpi/auth/sendCode</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">build</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        okHttpClient</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">newCall</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">request</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">enqueue</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Callback</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">onFailure</span><span style=\"color: #89DDFF\">(@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Call</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">call</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">IOException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                Log</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">d</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">TAG</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">网络请求失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">onResponse</span><span style=\"color: #89DDFF\">(@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Call</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">call</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Response</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">response</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">throws</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">IOException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                Log</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">d</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">TAG</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">网络请求成功,code=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\">response</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">code</span><span style=\"color: #89DDFF\">());</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">response</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">isSuccessful</span><span style=\"color: #89DDFF\">())&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #C792EA\">ResponseBody</span><span style=\"color: #BABED8\"> body </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> response</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">body</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">body</span><span style=\"color: #89DDFF\">!=null)&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                        Log</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">d</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">TAG</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> body</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">toString</span><span style=\"color: #89DDFF\">());</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><img src=\"/img/image-20240428165915646.png\" alt=\"image-20240428165915646\"></p>\n<h4 id=\"RequestBody使用FromBody提交信息\"><a href=\"#RequestBody使用FromBody提交信息\" class=\"headerlink\" title=\"RequestBody使用FromBody提交信息\"></a>RequestBody使用FromBody提交信息</h4><p>使用OkHttp进行Post请求，RequestBody使用FromBody提交信息MediaType&#x3D;”application&#x2F;x-www-form-urlencoded”</p>\n<p><img src=\"/img/image-20240428170301357.png\" alt=\"image-20240428170301357\"></p>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">/**</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">     * 使用OkHttp进行Post请求，RequestBody使用FromBody提交信息</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">     */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testPostByFromBody</span><span style=\"color: #89DDFF\">()&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">FormBody</span><span style=\"color: #BABED8\"> requestBody </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> FormBody</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Builder</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">phone</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">123456</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">build</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Request</span><span style=\"color: #BABED8\"> request </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> Request</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Builder</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">post</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">requestBody</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">addHeader</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">content-type</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">application/json</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">url</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://hotfix-service-prod.g.mi.com/quick-game/qpi/auth/sendCode</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">build</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        okHttpClient</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">newCall</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">request</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">enqueue</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Callback</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">onFailure</span><span style=\"color: #89DDFF\">(@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Call</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">call</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">IOException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                Log</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">d</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">TAG</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">网络请求失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">onResponse</span><span style=\"color: #89DDFF\">(@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Call</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">call</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">NonNull</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Response</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">response</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">throws</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">IOException</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                Log</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">d</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">TAG</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">网络请求成功,code=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\">response</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">code</span><span style=\"color: #89DDFF\">());</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">response</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">isSuccessful</span><span style=\"color: #89DDFF\">())&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #C792EA\">ResponseBody</span><span style=\"color: #BABED8\"> body </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> response</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">body</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">body</span><span style=\"color: #89DDFF\">!=null)&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                        Log</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">d</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">TAG</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> body</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">toString</span><span style=\"color: #89DDFF\">());</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><img src=\"/img/image-20240428170922876.png\" alt=\"image-20240428170922876\"></p>\n<h3 id=\"OkHttp-拦截器\"><a href=\"#OkHttp-拦截器\" class=\"headerlink\" title=\"OkHttp-拦截器\"></a>OkHttp-拦截器</h3><p>OkHttpClient好比一个工厂，用于生产Call，其中具备非常多可设置的属性。并非每一个请求创建一个，而是根据需要多个请求公用一个OkHttpClient，所以OkHttpClient使用单例保证实例唯一性</p>\n<p><img src=\"/img/image-20240428171008349.png\" alt=\"image-20240428171008349\"></p>\n<p><img src=\"/img/image-20240428171127602.png\" alt=\"image-20240428171127602\"></p>\n<p>addlnterceptor与addNetworklnterceptor的区别二者通常的叫法为应用拦截器和网络拦截器</p>\n<p>从使用场景看，应用拦截器因为<strong>只会调用一次</strong>，通常用于统计客户端的网络请求发起情况；而网络拦截器一次调用代表了一定会发起一次网络通信，因此通常可用于统计网络链路上传输的数据</p>\n<p><img src=\"/img/image-20240428171342068.png\" alt=\"image-20240428171342068\"></p>\n<p><img src=\"/img/image-20240428171630141.png\" alt=\"image-20240428171630141\"></p>\n<h3 id=\"通过拦截器打印请求过程数据\"><a href=\"#通过拦截器打印请求过程数据\" class=\"headerlink\" title=\"通过拦截器打印请求过程数据\"></a>通过拦截器打印请求过程数据</h3><p><img src=\"/img/image-20240428171706336.png\" alt=\"image-20240428171706336\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>需要特别注意：ResponseBody的string()只能有效调用一次，否则会报错</p></blockquote>\n<p><img src=\"/img/image-20240428171725645.png\" alt=\"image-20240428171725645\"></p>\n<h3 id=\"如何添加公共请求头？\"><a href=\"#如何添加公共请求头？\" class=\"headerlink\" title=\"如何添加公共请求头？\"></a>如何添加公共请求头？</h3><p><img src=\"/img/image-20240428172429457.png\" alt=\"image-20240428172429457\"></p>\n<h3 id=\"拦截器集合的递归\"><a href=\"#拦截器集合的递归\" class=\"headerlink\" title=\"拦截器集合的递归\"></a>拦截器集合的递归</h3><p>OKHTTP中请求流程的运作就好比是一个拦截器集合的递归流程</p>\n<p>这种方式的优势是，给予了开发者充分的流程控制（addlnterceptor塞入的拦截器可以对最终流程出入口控制，addNetworklnterceptor塞入的拦截器可以对请求过程流程进行出入口控制）。</p>\n<p>在此基础上同时又保证了内部流程的一致性。</p>\n<p><img src=\"/img/image-20240428172454581.png\" alt=\"image-20240428172454581\"></p>\n<h3 id=\"OkHttp主要组成部分\"><a href=\"#OkHttp主要组成部分\" class=\"headerlink\" title=\"OkHttp主要组成部分\"></a>OkHttp主要组成部分</h3><p><img src=\"/img/image-20240428172602942.png\" alt=\"image-20240428172602942\"></p>\n<p><img src=\"/img/image-20240428172617047.png\" alt=\"image-20240428172617047\"></p>\n<h3 id=\"OkHttp总结\"><a href=\"#OkHttp总结\" class=\"headerlink\" title=\"OkHttp总结\"></a>OkHttp总结</h3><p>1.Okhttp使用分为三步：</p>\n<ul>\n<li><p>创建OkHttpClient和Request对象</p>\n</li>\n<li><p>创建Call对象</p>\n</li>\n<li><p>执行Call对象，发起同步或异步请求并处理返回数据</p>\n</li>\n</ul>\n<p>2.拦截器</p>\n<ul>\n<li>如何自定义拦截器</li>\n</ul>\n<h2 id=\"四、Handler使用\"><a href=\"#四、Handler使用\" class=\"headerlink\" title=\"四、Handler使用\"></a>四、Handler使用</h2><p><a href=\"https://blog.csdn.net/caesardadi/article/details/8473777\">Android Handler Message总结</a></p>\n<p><a href=\"https://blog.csdn.net/qq_46906413/article/details/125663010\">handler+message【消息机制】</a></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>子线程进行网络请求后，可以直接将数据进行渲染吗?</p></blockquote>\n<h3 id=\"什么是UI线程\"><a href=\"#什么是UI线程\" class=\"headerlink\" title=\"什么是UI线程\"></a>什么是UI线程</h3><p>UI线程是Android应用中的一个特殊的线程，它负责处理用户界面的更新和事件处理。所有的UI操作，包括界面更新、用户交互事件的响应和视图的绘制，都必须在UI线程中执行。</p>\n<p>这是因为Android的界面工具包并不是线程安全的，所以所有的UI操作都必须在同一个线程中被串行执行。</p>\n<p><strong>UI线程也被称为主线程</strong></p>\n<h3 id=\"什么是Handler\"><a href=\"#什么是Handler\" class=\"headerlink\" title=\"什么是Handler\"></a>什么是Handler</h3><p>Handler一套Android消息传递机制，主要用于线程间通信；</p>\n<p>例如子线程通过Handler将更新UI的操作传递给主线程，从而完成UI刷新。</p>\n<p>在多线程的应用场景中，将工作线程中需更新UI的操作信息传递到UI主线程，从而实现工作线程对UI的更新处理，最终实现异步消息的处理</p>\n<p><img src=\"/img/image-20240428172958409.png\" alt=\"image-20240428172958409\"></p>\n<h3 id=\"Handler用法\"><a href=\"#Handler用法\" class=\"headerlink\" title=\"Handler用法\"></a>Handler用法</h3><p><img src=\"/img/image-20240428173050320.png\" alt=\"image-20240428173050320\"></p>\n<h3 id=\"使用Handler进行线程切换完成Ui刷新\"><a href=\"#使用Handler进行线程切换完成Ui刷新\" class=\"headerlink\" title=\"使用Handler进行线程切换完成Ui刷新\"></a>使用Handler进行线程切换完成Ui刷新</h3><ul>\n<li>发送</li>\n</ul>\n<p><img src=\"/img/image-20240428173308662.png\" alt=\"image-20240428173308662\"></p>\n<ul>\n<li>接收</li>\n</ul>\n<p><img src=\"/img/image-20240428173325983.png\" alt=\"image-20240428173325983\"></p>\n<p><img src=\"/img/image-20240428173417931.png\" alt=\"image-20240428173417931\"></p>\n<p><img src=\"/img/image-20240428175614746.png\" alt=\"image-20240428175614746\"></p>\n<h3 id=\"练习\"><a href=\"#练习\" class=\"headerlink\" title=\"练习\"></a>练习</h3><p>使用Handler实现短信验证码60s倒计时功能</p>\n<p><img src=\"/img/image-20240428181014953.png\" alt=\"image-20240428181014953\"></p>\n<h3 id=\"Handler消息清除\"><a href=\"#Handler消息清除\" class=\"headerlink\" title=\"Handler消息清除\"></a>Handler消息清除</h3><p><img src=\"/img/image-20240428181131783.png\" alt=\"image-20240428181131783\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>我们为什么需要及时清除Handler消息？</p></blockquote>\n<p>主线程消息是排队运行，不是所有的消息都会立马执行。当页面需要销毁，跟UI修改相关的操作往往无意义。同时还会可能造成一些空指针异常或者导致当前页面无法及时回收、内存泄漏</p>\n<h2 id=\"五、Retrofit使用\"><a href=\"#五、Retrofit使用\" class=\"headerlink\" title=\"五、Retrofit使用\"></a>五、Retrofit使用</h2><p><a href=\"https://blog.csdn.net/JMW1407/article/details/114237331\">Android：Retrofit简单说明 &amp; 使用方法解析</a></p>\n<p><a href=\"https://blog.csdn.net/xieluoxixi/article/details/80092582\">关于Retrofit网络请求URL中含有可变参数的处理</a></p>\n<p><a href=\"https://juejin.cn/post/6978777076073660429\">Retrofit2 实战（一、使用详解篇）</a></p>\n<h3 id=\"Retrofit是什么？\"><a href=\"#Retrofit是什么？\" class=\"headerlink\" title=\"Retrofit是什么？\"></a>Retrofit是什么？</h3><p><img src=\"/img/image-20240428181923803.png\" alt=\"image-20240428181923803\"></p>\n<h3 id=\"Retrofit的优点\"><a href=\"#Retrofit的优点\" class=\"headerlink\" title=\"Retrofit的优点\"></a>Retrofit的优点</h3><p>1.超级解耦，接口定义、接口参数、接口回调不在耦合在一起</p>\n<p>2.可以配置不同的httpClient来实现网络请求，如OkHttp、HttpClient</p>\n<p>3.支持同步、异步、Rxjava</p>\n<p>4.可以配置不同反序列化工具类来解析不同的数据，如json、xml</p>\n<p>5.请求速度快，使用方便灵活简洁</p>\n<h3 id=\"Retrofit的使用\"><a href=\"#Retrofit的使用\" class=\"headerlink\" title=\"Retrofit的使用\"></a>Retrofit的使用</h3><p>github地址：<a href=\"https://github.com/square/retrofit\">https://github.com/square/retrofit</a></p>\n<p>在所在App build.gradle中引入</p>\n<div class=\"language-kotlin\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">kotlin</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//实现将HTTP请求转换为Java接口</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">implementation</span><span style=\"color: #BABED8\"> (</span><span style=\"color: #C3E88D\">&quot;com.squareup.retrofit2:retrofit:2.9.0&quot;</span><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//配合Rxjava 使用</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">implementation</span><span style=\"color: #BABED8\"> (</span><span style=\"color: #C3E88D\">&quot;com.squareup.retrofit2:adapter-rxjava:2.1.0&quot;</span><span style=\"color: #BABED8\">)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//转换器，请求结果转换成Model</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">implementation</span><span style=\"color: #BABED8\"> (</span><span style=\"color: #C3E88D\">&quot;com.squareup.retrofit2:converter-gson:2.9.0&quot;</span><span style=\"color: #BABED8\">)</span></span></code></pre></div><h3 id=\"请求方法注解\"><a href=\"#请求方法注解\" class=\"headerlink\" title=\"请求方法注解\"></a>请求方法注解</h3><p><img src=\"/img/image-20240428182314024.png\" alt=\"image-20240428182314024\"></p>\n<h3 id=\"请求参数的注解\"><a href=\"#请求参数的注解\" class=\"headerlink\" title=\"请求参数的注解\"></a>请求参数的注解</h3><p><img src=\"/img/image-20240428182406030.png\" alt=\"image-20240428182406030\"></p>\n<h3 id=\"请求头注解\"><a href=\"#请求头注解\" class=\"headerlink\" title=\"请求头注解\"></a>请求头注解</h3><p><img src=\"/img/image-20240428182518951.png\" alt=\"image-20240428182518951\"></p>\n<h3 id=\"标记类注解\"><a href=\"#标记类注解\" class=\"headerlink\" title=\"标记类注解\"></a>标记类注解</h3><p><img src=\"/img/image-20240428182538402.png\" alt=\"image-20240428182538402\"></p>\n<h3 id=\"使用Retrofit进行网络请求\"><a href=\"#使用Retrofit进行网络请求\" class=\"headerlink\" title=\"使用Retrofit进行网络请求\"></a>使用Retrofit进行网络请求</h3><p><img src=\"/img/image-20240428182625047.png\" alt=\"image-20240428182625047\"></p>\n<h3 id=\"如何使用Retrofit进行get请求替换Path？\"><a href=\"#如何使用Retrofit进行get请求替换Path？\" class=\"headerlink\" title=\"如何使用Retrofit进行get请求替换Path？\"></a>如何使用Retrofit进行get请求替换Path？</h3><p><img src=\"/img/image-20240428183025930.png\" alt=\"image-20240428183025930\"></p>\n<h3 id=\"如何使用Retrofit进行Post请求？\"><a href=\"#如何使用Retrofit进行Post请求？\" class=\"headerlink\" title=\"如何使用Retrofit进行Post请求？\"></a>如何使用Retrofit进行Post请求？</h3><p><img src=\"/img/image-20240428182934285.png\" alt=\"image-20240428182934285\"></p>\n<h3 id=\"文本解析适配器\"><a href=\"#文本解析适配器\" class=\"headerlink\" title=\"文本解析适配器\"></a>文本解析适配器</h3><p>如果使用Retrofit进行网络请求无法解析成Json，我们怎么办呢？</p>\n<p><img src=\"/img/image-20240428183109107.png\" alt=\"image-20240428183109107\"></p>\n<p><img src=\"/img/image-20240428183516742.png\" alt=\"image-20240428183516742\"></p>\n<h3 id=\"SharedPreferences\"><a href=\"#SharedPreferences\" class=\"headerlink\" title=\"SharedPreferences\"></a>SharedPreferences</h3><p>SharedPreferences是Android平台上一个轻量级的存储类，用来保存应用程序的各种<strong>配置信息</strong></p>\n<p>其本质是一个以”键-值”对的方式保存数据的xml文件，其文件保存在&#x2F;data&#x2F;data&#x2F;&#x2F;shared_prefs目录下</p>\n<p><img src=\"/img/image-20240428184112660.png\" alt=\"image-20240428184112660\"></p>\n<h3 id=\"MMKV\"><a href=\"#MMKV\" class=\"headerlink\" title=\"MMKV\"></a>MMKV</h3><p>MMKV是基于mmap内存映射和protobuf序列化两者优势于一体的框架，其具有更高性能高，更强的稳定性。</p>\n<p>用来代替SharedPreferences，解决其低性能和ANR问题</p>\n<p><img src=\"/img/image-20240428184424281.png\" alt=\"image-20240428184424281\"></p>\n<h2 id=\"六、Handler机制\"><a href=\"#六、Handler机制\" class=\"headerlink\" title=\"六、Handler机制\"></a>六、Handler机制</h2><h3 id=\"生产者-消费者模式\"><a href=\"#生产者-消费者模式\" class=\"headerlink\" title=\"生产者-消费者模式\"></a>生产者-消费者模式</h3><p>在一个生产者-消费者模式中，通常会有三个角色：消息队列、生产者、消费者</p>\n<ul>\n<li><p>消息队列：负责保存消息，提供存取消息的功能</p>\n</li>\n<li><p>生产者：负责生产消息，塞到共享的消息队列中</p>\n</li>\n<li><p>消费者：负责从共享消息队列中取出消息，执行消息对应的任务</p>\n</li>\n</ul>\n<p><img src=\"/img/image-20240428181444660.png\" alt=\"image-20240428181444660\"></p>\n<h3 id=\"Handler机制由四部分组成\"><a href=\"#Handler机制由四部分组成\" class=\"headerlink\" title=\"Handler机制由四部分组成\"></a>Handler机制由四部分组成</h3><p><img src=\"/img/image-20240428181317974.png\" alt=\"image-20240428181317974\"></p>\n<h3 id=\"Message包含消息描述和数据\"><a href=\"#Message包含消息描述和数据\" class=\"headerlink\" title=\"Message包含消息描述和数据\"></a>Message包含消息描述和数据</h3><p><img src=\"/img/image-20240428181333885.png\" alt=\"image-20240428181333885\"></p>\n<p><img src=\"/img/image-20240428181353273.png\" alt=\"image-20240428181353273\"></p>\n<p><img src=\"/img/image-20240428181419008.png\" alt=\"image-20240428181419008\"></p>\n<p><img src=\"/img/image-20240428181426411.png\" alt=\"image-20240428181426411\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>思考：子线程中如何使用handler会发生什么</p></blockquote>\n<h3 id=\"子线程中如何使用handler\"><a href=\"#子线程中如何使用handler\" class=\"headerlink\" title=\"子线程中如何使用handler\"></a>子线程中如何使用handler</h3><p>Looper.prepare()和Loop.loop()方法</p>\n<p><img src=\"/img/image-20240428181547549.png\" alt=\"image-20240428181547549\"></p>\n<h3 id=\"ThreadLocal\"><a href=\"#ThreadLocal\" class=\"headerlink\" title=\"ThreadLocal\"></a>ThreadLocal</h3><p><img src=\"/img/image-20240428181655589.png\" alt=\"image-20240428181655589\"></p>\n<h3 id=\"思考题\"><a href=\"#思考题\" class=\"headerlink\" title=\"思考题\"></a>思考题</h3><p>1.Handler、Looper、MessageQueue、线程的关系</p>\n<ul>\n<li><p>一个线程对应的Looper数量对应关系:只有一个</p>\n</li>\n<li><p>Looper和MessageQueue数量对应关系:一一对应</p>\n</li>\n<li><p>Handler和Looper的数量对应关系:一对多</p>\n</li>\n</ul>\n<p>2.为什么主线程不用初始化Looper？</p>\n<p>3.hander是如何进行线程切换的？</p>\n<h1 id=\"课后作业\"><a href=\"#课后作业\" class=\"headerlink\" title=\"课后作业\"></a>课后作业</h1><p><img src=\"/img/image-20240428184923092.png\" alt=\"image-20240428184923092\"></p>\n","text":"安卓实训第九天内容笔记 —— Android的权限，Android的HTTP请求...","permalink":"/post/Android-Day9","photos":[],"count_time":{"symbolsCount":"16k","symbolsTime":"15 mins."},"categories":[{"name":"安卓","slug":"安卓","count":10,"path":"api/categories/安卓.json"}],"tags":[{"name":"Android","slug":"Android","count":10,"path":"api/tags/Android.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Android%E7%9A%84%E6%9D%83%E9%99%90\"><span class=\"toc-text\">Android的权限</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AF%BE%E7%A8%8B%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">课程目标</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81%E8%AE%A4%E8%AF%86Android%E6%9D%83%E9%99%90\"><span class=\"toc-text\">一、认识Android权限</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E6%9D%83%E9%99%90%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">1、权限是什么，为什么需要权限管理</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E6%9D%83%E9%99%90%E7%9A%84%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2、权限的类型</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%99%AE%E9%80%9A%E6%9D%83%E9%99%90-normal-permission\"><span class=\"toc-text\">普通权限(normal permission)</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%95%8F%E6%84%9F%E6%9D%83%E9%99%90-dangerous-permission\"><span class=\"toc-text\">敏感权限(dangerous permission)</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3%E3%80%81%E6%9D%83%E9%99%90%E7%BB%84\"><span class=\"toc-text\">3、权限组</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4%E3%80%81%E7%B3%BB%E7%BB%9F%E6%9C%89%E5%93%AA%E4%BA%9B%E6%9D%83%E9%99%90\"><span class=\"toc-text\">4、系统有哪些权限</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5%E3%80%81%E6%9D%83%E9%99%90%E5%9C%A8%E4%B8%8D%E5%90%8CAndroid%E7%89%88%E6%9C%AC%E5%B7%AE%E5%BC%82\"><span class=\"toc-text\">5、权限在不同Android版本差异</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B0%8F%E7%BB%93\"><span class=\"toc-text\">小结</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E5%A6%82%E4%BD%95%E8%AF%B7%E6%B1%82%E6%9D%83%E9%99%90\"><span class=\"toc-text\">二、如何请求权限</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80-%E5%90%91%E6%B8%85%E5%8D%95%E6%96%87%E4%BB%B6%E6%B7%BB%E5%8A%A0%E6%9D%83%E9%99%90\"><span class=\"toc-text\">(一)向清单文件添加权限</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BA%8C-%E6%A3%80%E6%9F%A5%E6%9D%83%E9%99%90\"><span class=\"toc-text\">(二)检查权限</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%89-%E8%AF%B7%E6%B1%82%E6%9D%83%E9%99%90\"><span class=\"toc-text\">(三)请求权限</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9B%9B-%E5%A4%84%E7%90%86%E6%9D%83%E9%99%90%E8%AF%B7%E6%B1%82%E5%93%8D%E5%BA%94\"><span class=\"toc-text\">(四)处理权限请求响应</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">代码</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%88%E6%9E%9C\"><span class=\"toc-text\">效果</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9D%83%E9%99%90\"><span class=\"toc-text\">三、自定义权限</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81%E7%9B%B8%E6%9C%BA%E6%9D%83%E9%99%90%E7%94%B3%E8%AF%B7%E7%BB%83%E4%B9%A0\"><span class=\"toc-text\">四、相机权限申请练习</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AF%BE%E5%A0%82%E7%BB%83%E4%B9%A0\"><span class=\"toc-text\">课堂练习</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Android%E7%9A%84HTTP%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">Android的HTTP请求</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AF%BE%E7%A8%8B%E7%9B%AE%E6%A0%87-1\"><span class=\"toc-text\">课程目标</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81HTTP%E8%AF%B7%E6%B1%82%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">一、HTTP请求类型</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Get%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">Get请求</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Post%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">Post请求</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Post%E8%AF%B7%E6%B1%82%E7%8A%B6%E6%80%81%E7%A0%81\"><span class=\"toc-text\">Post请求状态码</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81HTTP%E8%AF%B7%E6%B1%82API%E5%8F%98%E8%BF%81\"><span class=\"toc-text\">二、HTTP请求API变迁</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81OKHTTP\"><span class=\"toc-text\">三、OKHTTP</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#OkHttp%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">OkHttp使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%90%8C%E6%AD%A5%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">同步网络请求</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%BC%82%E6%AD%A5%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">异步网络请求</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#GSON-%E8%B0%B7%E6%AD%8C%E5%8F%91%E5%B8%83%E7%9A%84%E4%B8%80%E4%B8%AAjson%E8%A7%A3%E6%9E%90%E6%A1%86%E6%9E%B6\"><span class=\"toc-text\">GSON:谷歌发布的一个json解析框架</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#OkHttp%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">OkHttp请求流程</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Request%E6%9E%84%E5%BB%BA\"><span class=\"toc-text\">Request构建</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#RequestBody\"><span class=\"toc-text\">RequestBody</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#OkHttp%E4%BD%BF%E7%94%A8-Post%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">OkHttp使用-Post请求</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#RequestBody%E4%BD%BF%E7%94%A8json%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">RequestBody使用json提交数据</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#RequestBody%E4%BD%BF%E7%94%A8FromBody%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">RequestBody使用FromBody提交信息</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#OkHttp-%E6%8B%A6%E6%88%AA%E5%99%A8\"><span class=\"toc-text\">OkHttp-拦截器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%80%9A%E8%BF%87%E6%8B%A6%E6%88%AA%E5%99%A8%E6%89%93%E5%8D%B0%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">通过拦截器打印请求过程数据</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E5%85%AC%E5%85%B1%E8%AF%B7%E6%B1%82%E5%A4%B4%EF%BC%9F\"><span class=\"toc-text\">如何添加公共请求头？</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8B%A6%E6%88%AA%E5%99%A8%E9%9B%86%E5%90%88%E7%9A%84%E9%80%92%E5%BD%92\"><span class=\"toc-text\">拦截器集合的递归</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#OkHttp%E4%B8%BB%E8%A6%81%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86\"><span class=\"toc-text\">OkHttp主要组成部分</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#OkHttp%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">OkHttp总结</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81Handler%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">四、Handler使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E6%98%AFUI%E7%BA%BF%E7%A8%8B\"><span class=\"toc-text\">什么是UI线程</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E6%98%AFHandler\"><span class=\"toc-text\">什么是Handler</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Handler%E7%94%A8%E6%B3%95\"><span class=\"toc-text\">Handler用法</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8Handler%E8%BF%9B%E8%A1%8C%E7%BA%BF%E7%A8%8B%E5%88%87%E6%8D%A2%E5%AE%8C%E6%88%90Ui%E5%88%B7%E6%96%B0\"><span class=\"toc-text\">使用Handler进行线程切换完成Ui刷新</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BB%83%E4%B9%A0\"><span class=\"toc-text\">练习</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Handler%E6%B6%88%E6%81%AF%E6%B8%85%E9%99%A4\"><span class=\"toc-text\">Handler消息清除</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%94%E3%80%81Retrofit%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">五、Retrofit使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Retrofit%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F\"><span class=\"toc-text\">Retrofit是什么？</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Retrofit%E7%9A%84%E4%BC%98%E7%82%B9\"><span class=\"toc-text\">Retrofit的优点</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Retrofit%E7%9A%84%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">Retrofit的使用</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%E6%B3%A8%E8%A7%A3\"><span class=\"toc-text\">请求方法注解</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%9A%84%E6%B3%A8%E8%A7%A3\"><span class=\"toc-text\">请求参数的注解</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AF%B7%E6%B1%82%E5%A4%B4%E6%B3%A8%E8%A7%A3\"><span class=\"toc-text\">请求头注解</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A0%87%E8%AE%B0%E7%B1%BB%E6%B3%A8%E8%A7%A3\"><span class=\"toc-text\">标记类注解</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8Retrofit%E8%BF%9B%E8%A1%8C%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">使用Retrofit进行网络请求</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Retrofit%E8%BF%9B%E8%A1%8Cget%E8%AF%B7%E6%B1%82%E6%9B%BF%E6%8D%A2Path%EF%BC%9F\"><span class=\"toc-text\">如何使用Retrofit进行get请求替换Path？</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Retrofit%E8%BF%9B%E8%A1%8CPost%E8%AF%B7%E6%B1%82%EF%BC%9F\"><span class=\"toc-text\">如何使用Retrofit进行Post请求？</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%87%E6%9C%AC%E8%A7%A3%E6%9E%90%E9%80%82%E9%85%8D%E5%99%A8\"><span class=\"toc-text\">文本解析适配器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#SharedPreferences\"><span class=\"toc-text\">SharedPreferences</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#MMKV\"><span class=\"toc-text\">MMKV</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%AD%E3%80%81Handler%E6%9C%BA%E5%88%B6\"><span class=\"toc-text\">六、Handler机制</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%94%9F%E4%BA%A7%E8%80%85-%E6%B6%88%E8%B4%B9%E8%80%85%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">生产者-消费者模式</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Handler%E6%9C%BA%E5%88%B6%E7%94%B1%E5%9B%9B%E9%83%A8%E5%88%86%E7%BB%84%E6%88%90\"><span class=\"toc-text\">Handler机制由四部分组成</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Message%E5%8C%85%E5%90%AB%E6%B6%88%E6%81%AF%E6%8F%8F%E8%BF%B0%E5%92%8C%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">Message包含消息描述和数据</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AD%90%E7%BA%BF%E7%A8%8B%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8handler\"><span class=\"toc-text\">子线程中如何使用handler</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#ThreadLocal\"><span class=\"toc-text\">ThreadLocal</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%80%9D%E8%80%83%E9%A2%98\"><span class=\"toc-text\">思考题</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A\"><span class=\"toc-text\">课后作业</span></a></li></ol>","author":{"name":"ChenZheng","slug":"blog-author","avatar":"/cover/avatar.jpg","link":"/","description":"幼稚园的小朋友の快乐小屋","socials":{"github":"https://github.com/sjwusj","twitter":"https://github.com/sjwusj","stackoverflow":"","wechat":"","qq":"","weibo":"https://github.com/sjwusj","zhihu":"https://github.com/sjwusj","csdn":"https://github.com/sjwusj","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Android_Day10","uid":"5f1ca7b02ab026fddaef0eab3789a5e5","slug":"Android-Day10","date":"2024-04-29T00:04:20.000Z","updated":"2024-11-15T12:53:00.548Z","comments":true,"path":"api/articles/Android-Day10.json","keywords":null,"cover":"cover/cover3.jpg","text":"安卓实训第十天内容笔记 —— 内存泄漏优化与ANR解决方案...","permalink":"/post/Android-Day10","photos":[],"count_time":{"symbolsCount":"12k","symbolsTime":"11 mins."},"categories":[{"name":"安卓","slug":"安卓","count":10,"path":"api/categories/安卓.json"}],"tags":[{"name":"Android","slug":"Android","count":10,"path":"api/tags/Android.json"}],"author":{"name":"ChenZheng","slug":"blog-author","avatar":"/cover/avatar.jpg","link":"/","description":"幼稚园的小朋友の快乐小屋","socials":{"github":"https://github.com/sjwusj","twitter":"https://github.com/sjwusj","stackoverflow":"","wechat":"","qq":"","weibo":"https://github.com/sjwusj","zhihu":"https://github.com/sjwusj","csdn":"https://github.com/sjwusj","juejin":"","customs":{}}}},"next_post":{"title":"Android_Day8","uid":"182ba7971ee744c4cf4dd93b7f84aa22","slug":"Android-Day8","date":"2024-04-27T00:17:23.000Z","updated":"2024-11-15T12:52:53.103Z","comments":true,"path":"api/articles/Android-Day8.json","keywords":null,"cover":"cover/cover3.jpg","text":"安卓实训第八天内容笔记 —— View的原理与自定义UI的实现...","permalink":"/post/Android-Day8","photos":[],"count_time":{"symbolsCount":"8.3k","symbolsTime":"8 mins."},"categories":[{"name":"安卓","slug":"安卓","count":10,"path":"api/categories/安卓.json"}],"tags":[{"name":"Android","slug":"Android","count":10,"path":"api/tags/Android.json"}],"author":{"name":"ChenZheng","slug":"blog-author","avatar":"/cover/avatar.jpg","link":"/","description":"幼稚园的小朋友の快乐小屋","socials":{"github":"https://github.com/sjwusj","twitter":"https://github.com/sjwusj","stackoverflow":"","wechat":"","qq":"","weibo":"https://github.com/sjwusj","zhihu":"https://github.com/sjwusj","csdn":"https://github.com/sjwusj","juejin":"","customs":{}}}}}