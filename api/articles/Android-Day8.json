{"title":"Android_Day8","uid":"182ba7971ee744c4cf4dd93b7f84aa22","slug":"Android-Day8","date":"2024-04-27T00:17:23.000Z","updated":"2024-04-27T14:22:49.366Z","comments":true,"path":"api/articles/Android-Day8.json","keywords":null,"cover":"image/cover3.jpg","content":"<h1 id=\"View的原理与自定义UI的实现\"><a href=\"#View的原理与自定义UI的实现\" class=\"headerlink\" title=\"View的原理与自定义UI的实现\"></a>View的原理与自定义UI的实现</h1><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>思考:</p>\n<p>1、观察界面实现有哪些特点？</p>\n<p>2、如何实现这么一个”标签云”控件？</p></blockquote>\n<p>难点：我们按行从左到右排布”标签”(TextView)，在当前行剩余宽度不足以放下下一个“标签”的时候，就需要换行，新起一行来放下一个”标签”，无法向现有布局描述这个需求</p>\n<img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427082008969.png\" alt=\"image-20240427082008969\" style=\"zoom:67%;\" />\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>目标</p></blockquote>\n<ul>\n<li><p>理解View绘制过程</p>\n</li>\n<li><p>在此基础上，在面对安卓现有控件无法实现的界面需求时，</p>\n</li>\n<li><p>有能力自定义控件实现</p>\n</li>\n</ul>\n<h2 id=\"一、View绘制过程\"><a href=\"#一、View绘制过程\" class=\"headerlink\" title=\"一、View绘制过程\"></a>一、View绘制过程</h2><p>1、Android四大组件是哪四个？</p>\n<ul>\n<li>Activity,Service,BroadcastReceiver,ContentProvider</li>\n</ul>\n<p>2、Activity组件的职责有哪些？</p>\n<ul>\n<li><p>1、用户界面展示，</p>\n</li>\n<li><p>2、生命周期管理，</p>\n</li>\n<li><p>3、用户交互响应</p>\n</li>\n<li><p>4、启动其他组件，</p>\n</li>\n<li><p>5、和其他组件通信，</p>\n</li>\n<li><p>6、权限申请等</p>\n</li>\n</ul>\n<p>3、学习了哪些View（控件）？</p>\n<ul>\n<li>ImageView,TextView,Button,EditText等</li>\n</ul>\n<p>4、学习了哪些ViewGroup（布局）？</p>\n<h3 id=\"Activity和View的关系\"><a href=\"#Activity和View的关系\" class=\"headerlink\" title=\"Activity和View的关系\"></a>Activity和View的关系</h3><p>1、Activity中展示内容的职责由Window类（由子类PhoneWindow具体实现）承担</p>\n<p>2、Window创建出根布局DecorView（继承自FrameLayout)</p>\n<img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427082600957.png\" alt=\"image-20240427082600957\" style=\"zoom:67%;\" />\n\n<h3 id=\"实现界面\"><a href=\"#实现界面\" class=\"headerlink\" title=\"实现界面\"></a>实现界面</h3><p>我们根据需求在根布局下完成布局树</p>\n<img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427082637390.png\" alt=\"image-20240427082637390\" style=\"zoom:67%;\" />\n\n\n\n<img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427082655624.png\" alt=\"image-20240427082655624\" style=\"zoom:67%;\" />\n\n<h3 id=\"绘制界面\"><a href=\"#绘制界面\" class=\"headerlink\" title=\"绘制界面\"></a>绘制界面</h3><p>系统根据我们的布局树完成界面绘制，单个View就只有三个步骤：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427082713252.png\" alt=\"image-20240427082713252\"></p>\n<h3 id=\"布局树逐级向下调用\"><a href=\"#布局树逐级向下调用\" class=\"headerlink\" title=\"布局树逐级向下调用\"></a>布局树逐级向下调用</h3><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427082752946.png\" alt=\"image-20240427082752946\" style=\"zoom:67%;\" />\n\n<h3 id=\"位置的描述依赖坐标系\"><a href=\"#位置的描述依赖坐标系\" class=\"headerlink\" title=\"位置的描述依赖坐标系\"></a>位置的描述依赖坐标系</h3><p>Android的坐标系定义为：</p>\n<ul>\n<li><p>屏幕的左上角为坐标原点</p>\n</li>\n<li><p>向右为x轴增大方</p>\n</li>\n<li><p>向向下为y轴增大方向</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427083111899.png\" alt=\"image-20240427083111899\"></p>\n<h3 id=\"位置定义\"><a href=\"#位置定义\" class=\"headerlink\" title=\"位置定义\"></a>位置定义</h3><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427083135649.png\" alt=\"image-20240427083135649\" style=\"zoom:67%;\" />\n\n<h3 id=\"章节小结\"><a href=\"#章节小结\" class=\"headerlink\" title=\"章节小结\"></a>章节小结</h3><p>1、单个View绘制过程关键的三个步骤</p>\n<p>2、布局树逐级向下调用</p>\n<h2 id=\"二、自定义View\"><a href=\"#二、自定义View\" class=\"headerlink\" title=\"二、自定义View\"></a>二、自定义View</h2><h3 id=\"案例\"><a href=\"#案例\" class=\"headerlink\" title=\"案例\"></a>案例</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427083515056.png\" alt=\"image-20240427083515056\"></p>\n<h3 id=\"draw函数\"><a href=\"#draw函数\" class=\"headerlink\" title=\"draw函数\"></a>draw函数</h3><p>1、作用：绘制内容在给定的Canvas上</p>\n<p>2、会在layout之后触发调用</p>\n<p>3、自定义View时考虑优先重写onDraw方法而不是这个方法</p>\n<p>4、如果一定要重写draw方法，要记得调用父类方法</p>\n<p>5、实现：有7个绘制步骤</p>\n<img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427083733677.png\" alt=\"image-20240427083733677\"  />\n\n<h3 id=\"draw函数7个绘制步骤\"><a href=\"#draw函数7个绘制步骤\" class=\"headerlink\" title=\"draw函数7个绘制步骤\"></a>draw函数7个绘制步骤</h3><p>1、绘制背景</p>\n<p>2、如有必要，保存画布图层以准备淡入淡出动画</p>\n<p>3、绘制内容（调用onDraw）</p>\n<p>4、绘制子View（即调用childView.draw）</p>\n<p>5、如有必要，绘制淡入淡出并恢复图层</p>\n<p>6、绘制装饰市（例如滚动条）</p>\n<p>7、如有必要，绘制默认焦点高亮</p>\n<h3 id=\"onDraw函数\"><a href=\"#onDraw函数\" class=\"headerlink\" title=\"onDraw函数\"></a>onDraw函数</h3><p>1、调用时机：在7个绘制步骤中的第三步</p>\n<p>2、实现：绘制内容</p>\n<img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427084015592.png\" alt=\"image-20240427084015592\"  />\n\n<h3 id=\"draw函数和onDraw函数\"><a href=\"#draw函数和onDraw函数\" class=\"headerlink\" title=\"draw函数和onDraw函数\"></a>draw函数和onDraw函数</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427084043768.png\" alt=\"image-20240427084043768\"></p>\n<p><strong>问题：</strong></p>\n<p>1、在draw方法中定义好绘制步骤，预留下onDraw方法让子类实现，这是什么设计模式？</p>\n<ul>\n<li>模版方法模式：规范实现步骤</li>\n</ul>\n<p>2、考虑优先重写onDraw方法，但是，什么时候适合重写draw方法?</p>\n<ul>\n<li>当我们希望修改现有绘制步骤</li>\n</ul>\n<h3 id=\"绘制内容在给定的Canvas上\"><a href=\"#绘制内容在给定的Canvas上\" class=\"headerlink\" title=\"绘制内容在给定的Canvas上\"></a>绘制内容在给定的Canvas上</h3><p>Canvas类：Android中用于绘制图形的重要类。它包含了许多绘图方法，主要可以分为以下几类：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427084349466.png\" alt=\"image-20240427084349466\"></p>\n<h3 id=\"Paint类配合提供绘制参数\"><a href=\"#Paint类配合提供绘制参数\" class=\"headerlink\" title=\"Paint类配合提供绘制参数\"></a>Paint类配合提供绘制参数</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427084615671.png\" alt=\"image-20240427084615671\"></p>\n<h3 id=\"Path类配合描述复杂图形\"><a href=\"#Path类配合描述复杂图形\" class=\"headerlink\" title=\"Path类配合描述复杂图形\"></a>Path类配合描述复杂图形</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427084701305.png\" alt=\"image-20240427084701305\"></p>\n<h3 id=\"章节小结-1\"><a href=\"#章节小结-1\" class=\"headerlink\" title=\"章节小结\"></a>章节小结</h3><p>1、内容绘制的两个重要函数</p>\n<p>​\t<img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427084936194.png\" alt=\"image-20240427084936194\" style=\"zoom:67%;\" /></p>\n<p>2、Canvas类</p>\n<ul>\n<li><p>提供各种绘制方法，分为以下几类</p>\n<ul>\n<li>绘制图形、复杂图形、文本、颜色，画布调整，图层操作</li>\n</ul>\n</li>\n<li><p>提供了特定类支持绘制参数设置、描述复杂图形</p>\n</li>\n</ul>\n<h3 id=\"练习\"><a href=\"#练习\" class=\"headerlink\" title=\"练习\"></a>练习</h3><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427085020289.png\" alt=\"image-20240427085020289\" style=\"zoom: 80%;\" />\n\n<ul>\n<li>Class0427EditTest.java</li>\n</ul>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Class0427EditTest</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">extends</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">AppCompatEditText</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Paint</span><span style=\"color: #BABED8\"> mPaint</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Paint</span><span style=\"color: #BABED8\"> mFPaint</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">Rect</span><span style=\"color: #BABED8\"> mRect</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Class0427EditTest</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Context</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">context</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        super</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">context</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #82AAFF\">initData</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Class0427EditTest</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Context</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">context</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">AttributeSet</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">attrs</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        super</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">context</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> attrs</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #82AAFF\">initData</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Class0427EditTest</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Context</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">context</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">AttributeSet</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">attrs</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">defStyleAttr</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        super</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">context</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> attrs</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> defStyleAttr</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #82AAFF\">initData</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">SuppressLint</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ResourceAsColor</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">initData</span><span style=\"color: #89DDFF\">()&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        mPaint </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Paint</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        mFPaint </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Paint</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        mRect </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">new</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Rect</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        mPaint</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setColor</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">0xff0000ff</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        mPaint</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setStyle</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">Paint</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Style</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">STROKE</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        mPaint</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setAntiAlias</span><span style=\"color: #89DDFF\">(true);</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #676E95; font-style: italic\">//设置线条宽度</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        mPaint</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setStrokeWidth</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        mFPaint</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setStyle</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">Paint</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Style</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">FILL</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        mFPaint</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setColor</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">R</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">color</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">light_banana</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        mFPaint</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setAntiAlias</span><span style=\"color: #89DDFF\">(true);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">@</span><span style=\"color: #C792EA\">Override</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">protected</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">onDraw</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Canvas</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">canvas</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        super</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">onDraw</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">canvas</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> count </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">getLineCount</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Rect</span><span style=\"color: #BABED8\"> r </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> mRect</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">Paint</span><span style=\"color: #BABED8\"> paint </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> mPaint</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> count</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> baseLine </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">getLineBounds</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">r</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            canvas</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">drawLine</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">r</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">left</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">baseLine</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">r</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">right</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">baseLine</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">paint</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> index </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #82AAFF\">getLineBounds</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">index</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">r</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        canvas</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">drawRect</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">mRect</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\">mFPaint</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><ul>\n<li>Class0427MainActivity.java</li>\n</ul>\n<div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">void</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">setTextToEdit</span><span style=\"color: #89DDFF\">()&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">TextView</span><span style=\"color: #BABED8\"> view </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">findViewById</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">R</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">id</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">edit</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        view</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">setText</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\t\\t</span><span style=\"color: #C3E88D\">菊花原产于我国，是世界各国人民普遍喜爱的一种著名花卉。菊花在我国有漫长的栽培历史，现在人们培植的菊花已有一千多个品种。1982年中国菊花学术研讨会根据花瓣、花形的特点，将菊花这个大家族分成5类30型。</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #C3E88D\">深秋，是菊花盛开的季节。人们喜欢成群结队地去公园赏菊。秋菊煞是好看，那一朵朵，那一簇簇，红的、黄的、白的、绿的等等，真是五彩缤纷。</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\n\\t\\t</span><span style=\"color: #C3E88D\">一次偶然的机遇，让我进一步认识了菊花这个大家庭。我从电脑上看了许多菊花的图片。每一种菊花都有一个诗情画意的名字：莲座菊、雪株红梅、踏雪寻梅等等。我特别喜欢那金色的瀑布菊。花瓣像一条条绸带，从上至下。从远处看，像一道道瀑布，一泻千里，真是花如其名。陈毅爷爷说的好：“秋菊能傲霜，风霜重重恶。本性能耐寒,风霜其耐何？”西风越紧，菊花开得越是繁茂；风霜越大，菊花越是艳丽。</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\n\\t\\t</span><span style=\"color: #C3E88D\">我爱菊花，是它让我有坚强的意志，有拼搏的精神，去开创新的生活。</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><ul>\n<li>edit_view.xml</li>\n</ul>\n<div class=\"language-xml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">xml</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">class_0427.Class0427EditTest</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #C792EA\">android</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #C792EA\">id</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">@+id/edit</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #C792EA\">android</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #C792EA\">textSize</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">25sp</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #C792EA\">android</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #C792EA\">layout_width</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">match_parent</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">        </span><span style=\"color: #C792EA\">android</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #C792EA\">layout_height</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">match_parent</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">/&gt;</span></span></code></pre></div><h2 id=\"三、自定义ViewGroup\"><a href=\"#三、自定义ViewGroup\" class=\"headerlink\" title=\"三、自定义ViewGroup\"></a>三、自定义ViewGroup</h2><p><a href=\"https://blog.csdn.net/g984160547/article/details/117562492\">Android ViewGroup介绍+实例</a></p>\n<p><a href=\"https://www.cnblogs.com/huolongluo/p/6017917.html\">自定义View和ViewGroup</a></p>\n<p><a href=\"https://www.jianshu.com/p/2fffa71ac5ba\">Android中View测量之MeasureSpec</a></p>\n<h3 id=\"measure函数\"><a href=\"#measure函数\" class=\"headerlink\" title=\"measure函数\"></a>measure函数</h3><p>1、作用：计算View的宽高</p>\n<p>2、调用onMeasure完成真正的计算工作，且子类应该重写onMeasure</p>\n<p>3、final修饰该方法，不可重写</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427100435076.png\" alt=\"image-20240427100435076\"></p>\n<h3 id=\"onMeasure函数\"><a href=\"#onMeasure函数\" class=\"headerlink\" title=\"onMeasure函数\"></a>onMeasure函数</h3><p>1、作用：计算View的宽高，应由子类重写，以提供对其内容的准确有效的测量。</p>\n<p>2、约定：重写此方法时，必须调用setMeasuredDimension(width,height)来存储此视图的测量好的宽度和高度</p>\n<p>3、没有final修饰符，可以重写</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427100527121.png\" alt=\"image-20240427100527121\"></p>\n<h3 id=\"measure函数和onMeasure函数\"><a href=\"#measure函数和onMeasure函数\" class=\"headerlink\" title=\"measure函数和onMeasure函数\"></a>measure函数和onMeasure函数</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427100542762.png\" alt=\"image-20240427100542762\"></p>\n<h3 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427100758549.png\" alt=\"image-20240427100758549\"></p>\n<h3 id=\"MeasureSpec类\"><a href=\"#MeasureSpec类\" class=\"headerlink\" title=\"MeasureSpec类\"></a>MeasureSpec类</h3><p>MeasureSpec类包含三个函数：</p>\n<ul>\n<li><p>解析数据：getSize()解析specSize、getMode()解析specMode</p>\n</li>\n<li><p>组装数据：makeMeasureSpec()</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427100820604.png\" alt=\"image-20240427100820604\"></p>\n<h3 id=\"测量模式\"><a href=\"#测量模式\" class=\"headerlink\" title=\"测量模式\"></a>测量模式</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>MeasureSpec高2位为SpecMode</p></blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427100915011.png\" alt=\"image-20240427100915011\"></p>\n<p>问题：假设一个View在创建之初想预估自己的尺寸，调用measure方法时，应该怎么设置输入参数</p>\n<h3 id=\"小结\"><a href=\"#小结\" class=\"headerlink\" title=\"小结\"></a>小结</h3><p>1、测量阶段两个重要的函数</p>\n<ul>\n<li>measure和onMeasure</li>\n</ul>\n<p>2、测量模式的取值</p>\n<ul>\n<li>UNSPECIFIED、EXPECTLY、AT_MOST</li>\n</ul>\n<h3 id=\"在布局时需要重写控件的布局参数layout-width，layout-height\"><a href=\"#在布局时需要重写控件的布局参数layout-width，layout-height\" class=\"headerlink\" title=\"在布局时需要重写控件的布局参数layout_width，layout_height\"></a>在布局时需要重写控件的布局参数layout_width，layout_height</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>问题：layout_width、layout_height支持哪些参数用于描述尺寸信息？</p></blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427101556475.png\" alt=\"image-20240427101556475\"></p>\n<h3 id=\"ViewGroup中MeasureSpec计算公式\"><a href=\"#ViewGroup中MeasureSpec计算公式\" class=\"headerlink\" title=\"ViewGroup中MeasureSpec计算公式\"></a>ViewGroup中MeasureSpec计算公式</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427101618147.png\" alt=\"image-20240427101618147\"></p>\n<h3 id=\"根布局DecorView的测量要求：窗口大小-窗口布局参数\"><a href=\"#根布局DecorView的测量要求：窗口大小-窗口布局参数\" class=\"headerlink\" title=\"根布局DecorView的测量要求：窗口大小+窗口布局参数\"></a>根布局DecorView的测量要求：窗口大小+窗口布局参数</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427101911722.png\" alt=\"image-20240427101911722\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427101921183.png\" alt=\"image-20240427101921183\"></p>\n<h3 id=\"疑问\"><a href=\"#疑问\" class=\"headerlink\" title=\"疑问\"></a>疑问</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>谁第一个引入了UNSPECIFIED的测量模式?</p></blockquote>\n<p>1、根布局DecorView的SpecMode（测量模式）只有两种EXACTLY、AT_MOST，且根布局DecorView的SpecSize受限于屏幕物理尺寸</p>\n<p>2、通过计算公式我们知道只有父View提供UNSPECIFIED的SpecMode（测量模式）才能计算出新的UNSPECIFIED的SpecMode（测量模式）</p>\n<ul>\n<li><p>具备滚动能力的ViewGroup，可以保证子View无论有多大的尺寸都能够容纳时，使用UNSPECIFIED模式测量子View</p>\n</li>\n<li><p>当前ViewGroup的布局策略会影响子view的测量要求，此时：子View测量要求&#x3D;子View布局参数+父View测量要求+<strong>当前ViewGroup的布局策略</strong></p>\n</li>\n</ul>\n<h3 id=\"根据当前ViewGroup布局策略计算好自己的宽高\"><a href=\"#根据当前ViewGroup布局策略计算好自己的宽高\" class=\"headerlink\" title=\"根据当前ViewGroup布局策略计算好自己的宽高\"></a>根据当前ViewGroup布局策略计算好自己的宽高</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427102147843.png\" alt=\"image-20240427102147843\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427102407334.png\" alt=\"image-20240427102407334\"></p>\n<h3 id=\"layout函数\"><a href=\"#layout函数\" class=\"headerlink\" title=\"layout函数\"></a>layout函数</h3><p>1、这是布局机制的第二阶段（第一阶段是测量）</p>\n<p>2、作用：给所有子View分配位置</p>\n<p>3、实现：在这个阶段，每个父View调用其所有子View的layout方法来确定它们的位置</p>\n<p>4、派生类不应覆盖这个方法。有子View的派生类应该覆盖onLayout方法。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427102511147.png\" alt=\"image-20240427102511147\"></p>\n<h3 id=\"onLayout函数\"><a href=\"#onLayout函数\" class=\"headerlink\" title=\"onLayout函数\"></a>onLayout函数</h3><p>1、被layout方法调用</p>\n<p>2、作用：为该布局的子View分配位置</p>\n<p>3、有子View的派生类应该重写这个方法，并对每个子View调用layout方法，实际分配位置使用测量过程中存储的子view尺寸来完成</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427102548078.png\" alt=\"image-20240427102548078\"></p>\n<h3 id=\"layout函数和onLayout函数区别\"><a href=\"#layout函数和onLayout函数区别\" class=\"headerlink\" title=\"layout函数和onLayout函数区别\"></a>layout函数和onLayout函数区别</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427102612711.png\" alt=\"image-20240427102612711\"></p>\n<h3 id=\"使用在测量过程中存储的子View尺寸\"><a href=\"#使用在测量过程中存储的子View尺寸\" class=\"headerlink\" title=\"使用在测量过程中存储的子View尺寸\"></a>使用在测量过程中存储的子View尺寸</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427102742463.png\" alt=\"image-20240427102742463\"></p>\n<h3 id=\"使用在测量过程中存储的子View尺寸来完成\"><a href=\"#使用在测量过程中存储的子View尺寸来完成\" class=\"headerlink\" title=\"使用在测量过程中存储的子View尺寸来完成\"></a>使用在测量过程中存储的子View尺寸来完成</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427102707192.png\" alt=\"image-20240427102707192\"></p>\n<h3 id=\"getMeasuredHeight和getHeight的区别\"><a href=\"#getMeasuredHeight和getHeight的区别\" class=\"headerlink\" title=\"getMeasuredHeight和getHeight的区别\"></a>getMeasuredHeight和getHeight的区别</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427102808471.png\" alt=\"image-20240427102808471\"></p>\n<h3 id=\"getMeasuredHeight和getHeight的区别-1\"><a href=\"#getMeasuredHeight和getHeight的区别-1\" class=\"headerlink\" title=\"getMeasuredHeight和getHeight的区别\"></a>getMeasuredHeight和getHeight的区别</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427102930996.png\" alt=\"image-20240427102930996\"></p>\n<h3 id=\"小结-1\"><a href=\"#小结-1\" class=\"headerlink\" title=\"小结\"></a>小结</h3><p>1、分配位置阶段两个重要的函数</p>\n<ul>\n<li>layout和onLayout</li>\n</ul>\n<p>2、获取控件宽高的两种方法</p>\n<ul>\n<li>getMeasuredWidth&#x2F;getMeasuredHeight、getWidth&#x2F;getHeight</li>\n<li>在赋值时机、赋值方法存在区别</li>\n</ul>\n<h3 id=\"练习-1\"><a href=\"#练习-1\" class=\"headerlink\" title=\"练习\"></a>练习</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427103149710.png\" alt=\"image-20240427103149710\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427140818601.png\" alt=\"image-20240427140818601\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427140840380.png\" alt=\"image-20240427140840380\"></p>\n<h3 id=\"如何定义标签间距\"><a href=\"#如何定义标签间距\" class=\"headerlink\" title=\"如何定义标签间距?\"></a>如何定义标签间距?</h3><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427145041897.png\" alt=\"image-20240427145041897\" style=\"zoom:67%;\" />\n\n\n\n<h4 id=\"自定义属性\"><a href=\"#自定义属性\" class=\"headerlink\" title=\"自定义属性\"></a>自定义属性</h4><p>在res&#x2F;values&#x2F;新建attrs.xml文件</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427145115114.png\" alt=\"image-20240427145115114\"></p>\n<h4 id=\"属性类型\"><a href=\"#属性类型\" class=\"headerlink\" title=\"属性类型\"></a>属性类型</h4><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427145205804.png\" alt=\"image-20240427145205804\"></p>\n<h4 id=\"使用属性\"><a href=\"#使用属性\" class=\"headerlink\" title=\"使用属性\"></a>使用属性</h4><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427145252049.png\" alt=\"image-20240427145252049\"></p>\n<div class=\"language-kotlin\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">kotlin</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\">?xml version</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">&quot;1.0&quot;</span><span style=\"color: #BABED8\"> encoding</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">&quot;utf-8&quot;</span><span style=\"color: #BABED8\">?</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\">resources</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\">declare</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">styleable name</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">&quot;Class0427TagCloud&quot;</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;!--</span><span style=\"color: #BABED8\">   水平间距     </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #C792EA\">-&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\">attr name</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">&quot;hMargin&quot;</span><span style=\"color: #BABED8\"> format</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">&quot;dimension&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">/&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;!--</span><span style=\"color: #BABED8\">    垂直间距    </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #C792EA\">-&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\">attr name</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">&quot;vMargin&quot;</span><span style=\"color: #BABED8\"> format</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #C3E88D\">&quot;dimension&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">/&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #BABED8\">declare</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">styleable</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #BABED8\">resources</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div><div class=\"language-java\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">java</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Class0427TagCloud</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">extends</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">ViewGroup</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> hMargin </span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">private</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> vMargin</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Class0427TagCloud</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Context</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">context</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        super</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">context</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">public</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Class0427TagCloud</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">Context</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">context</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">AttributeSet</span><span style=\"color: #BABED8\"> </span><span style=\"color: #BABED8; font-style: italic\">attrs</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        super</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">context</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> attrs</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">TypedArray</span><span style=\"color: #BABED8\"> typedArray </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> context</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">obtainStyledAttributes</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">attrs</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> R</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">styleable</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Class0427TagCloud</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        hMargin </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> typedArray</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getDimension</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">R</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">styleable</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Class0427TagCloud_hMargin</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        vMargin </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> typedArray</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">getDimension</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">R</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">styleable</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Class0427TagCloud_vMargin</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        typedArray</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">recycle</span><span style=\"color: #89DDFF\">();</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h3 id=\"章节小结-2\"><a href=\"#章节小结-2\" class=\"headerlink\" title=\"章节小结\"></a>章节小结</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427151809762.png\" alt=\"image-20240427151809762\"></p>\n<p>View绘制过程中的第二个步骤layout：计算View的位置</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427151853783.png\" alt=\"image-20240427151853783\"></p>\n<h2 id=\"四、响应手势操作\"><a href=\"#四、响应手势操作\" class=\"headerlink\" title=\"四、响应手势操作\"></a>四、响应手势操作</h2><p><a href=\"https://www.runoob.com/w3cnote/android-tutorial-gestures.html\">Gestures(手势)</a></p>\n<p><a href=\"https://blog.csdn.net/u010111268/article/details/80003848\">最简单的android拖拽交换view</a></p>\n<p><a href=\"https://blog.csdn.net/xqx5140/article/details/53483907\">自定义ViewGroup，子View可对换位置</a></p>\n<h3 id=\"有哪些手势？\"><a href=\"#有哪些手势？\" class=\"headerlink\" title=\"有哪些手势？\"></a>有哪些手势？</h3><p>点击、滑动、长按、拖动、双指缩放、双击、在屏幕边缘滑动等等</p>\n<h3 id=\"MotionEvent类\"><a href=\"#MotionEvent类\" class=\"headerlink\" title=\"MotionEvent类\"></a>MotionEvent类</h3><p>MotionEvent类（运动事件）包含：ACTION（事件类型）+事件位置</p>\n<h4 id=\"事件类型和事件位置\"><a href=\"#事件类型和事件位置\" class=\"headerlink\" title=\"事件类型和事件位置\"></a>事件类型和事件位置</h4><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427152104017.png\" alt=\"image-20240427152104017\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>用户的真实有意义的手势是由多个MotionEvent（运动事件）组合而成</p></blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427152215042.png\" alt=\"image-20240427152215042\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>手势都是怎么由运动事件组合来的?</p></blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427152344282.png\" alt=\"image-20240427152344282\"></p>\n<h4 id=\"小结-2\"><a href=\"#小结-2\" class=\"headerlink\" title=\"小结\"></a>小结</h4><p>手势是由什么组成的？</p>\n<p>事件类型有哪些？</p>\n<ul>\n<li><p>手势由一组运动事件组成</p>\n</li>\n<li><p>构成手势的事件有</p>\n<ul>\n<li><p>单指事件DOWN，MOVE，UP，CANCEL；</p>\n</li>\n<li><p>多指事件POINTER_DOWN，POINTER_UP</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"手势分发及响应过程\"><a href=\"#手势分发及响应过程\" class=\"headerlink\" title=\"手势分发及响应过程\"></a>手势分发及响应过程</h3><h4 id=\"手势分发及响应过程：View处理流程\"><a href=\"#手势分发及响应过程：View处理流程\" class=\"headerlink\" title=\"手势分发及响应过程：View处理流程\"></a>手势分发及响应过程：View处理流程</h4><p>因为我们认为一个有意义的手势是由ACTION_DOWN开始的一组MotionEvent(运动事件）所以如果需要响应手势，<strong>第一个ACTION_DOWN就应该开始消费</strong>，即onTouch返回true(且整组手势都应该持续返回true),如果返回false，那么后续父View将不会把该组事件分发到当前View</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427152543121.png\" alt=\"image-20240427152543121\"></p>\n<h4 id=\"手势分发及响应过程：ViewGroup处理流程\"><a href=\"#手势分发及响应过程：ViewGroup处理流程\" class=\"headerlink\" title=\"手势分发及响应过程：ViewGroup处理流程\"></a>手势分发及响应过程：ViewGroup处理流程</h4><p><strong>onlnterceptTouchEvent</strong>:</p>\n<p>作用：即便事件是先分发给子View处理，且子View的dispatchTouchEvent返回true（子View表示会消费这个事件），当前ViewGroup依然有拦截的能力</p>\n<p><strong>场景</strong>：</p>\n<p>支持滚动的ViewGroup中的子View做了事件消费第一个事件action_down发生在该子View范围内，该子View的dispatchTouchEvent方法返回true</p>\n<p>第二个事件是action_move，此时当前ViewGroup判断为滑动手势，由自己开始消费（onlnterceptTouchEvent返回true拦截该事件），并且给子View分发action_cancel事件（帮助子View结束此组手势响应）</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427152721745.png\" alt=\"image-20240427152721745\"></p>\n<h4 id=\"小结-3\"><a href=\"#小结-3\" class=\"headerlink\" title=\"小结\"></a>小结</h4><p>1.要实现手势操作首先要做什么?</p>\n<ul>\n<li>需要响应手势就需要onTouch从action_down开始就返回true(表示消费事件)</li>\n</ul>\n<p>2.ViewGroup需要拦截子View的消费事件该怎么办？</p>\n<ul>\n<li>ViewGroup可以通过onlnterceptTouchEvent方法拦截子View正在消费的事件</li>\n</ul>\n<h3 id=\"GestureDetector类\"><a href=\"#GestureDetector类\" class=\"headerlink\" title=\"GestureDetector类\"></a>GestureDetector类</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>作用：提供封装好的手势判断结果</p></blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427153044113.png\" alt=\"image-20240427153044113\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>问题：实现滑动手势要处理哪些函数？</p></blockquote>\n<ul>\n<li>onDown,onScoll</li>\n</ul>\n<h4 id=\"GestureDetector类-使用\"><a href=\"#GestureDetector类-使用\" class=\"headerlink\" title=\"GestureDetector类-使用\"></a>GestureDetector类-使用</h4><p>1.创建GestureDetcor对象</p>\n<p>2.重写onTouchEvent方法，或者注册onTouchListener</p>\n<p>3.将持续不断的MotionEvent交给GestureDetector处理</p>\n<p>4.处理响应回调，实现想要的手势</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427153418842.png\" alt=\"image-20240427153418842\"></p>\n<h4 id=\"GestureDetector-OnDoubleTapListener\"><a href=\"#GestureDetector-OnDoubleTapListener\" class=\"headerlink\" title=\"GestureDetector#OnDoubleTapListener\"></a>GestureDetector#OnDoubleTapListener</h4><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>作用：检测<strong>双击手势</strong></p>\n<p>使用：使用方式同GestureDetector</p></blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427153508979.png\" alt=\"image-20240427153508979\"></p>\n<h3 id=\"ScaleGestureDetector类\"><a href=\"#ScaleGestureDetector类\" class=\"headerlink\" title=\"ScaleGestureDetector类\"></a>ScaleGestureDetector类</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>作用：检测<strong>双指缩放</strong>手势</p>\n<p>使用：使用方式同GestureDetector</p></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>问题：如果一个控件同时支持滑动手势和缩放手势，应该怎么处理呢？</p>\n<ul>\n<li>使用两个监听对象</li>\n</ul></blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427153558375.png\" alt=\"image-20240427153558375\"></p>\n<h3 id=\"练习-2\"><a href=\"#练习-2\" class=\"headerlink\" title=\"练习\"></a>练习</h3><p>给”标签云”控件中的标签加上拖动手势</p>\n<p>问题：</p>\n<ul>\n<li><p>1.使用gestureDetecor实现，实现步骤是怎样的？</p>\n</li>\n<li><p>2.需要处理那几个函数回调？</p>\n</li>\n<li><p>3.怎么判断拖动结束？</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427153928375.png\" alt=\"image-20240427153928375\"></p>\n<h3 id=\"内容回顾\"><a href=\"#内容回顾\" class=\"headerlink\" title=\"内容回顾\"></a>内容回顾</h3><p><img src=\"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/img/android/image-20240427164639248.png\" alt=\"image-20240427164639248\"></p>\n<h2 id=\"课后作业\"><a href=\"#课后作业\" class=\"headerlink\" title=\"课后作业\"></a>课后作业</h2><p>必选：完成”标签云”控件，包括自定义属性</p>\n<p>可选1：完成拖动手势</p>\n<p>可选2：完成拖动手势后，触发标签变更位置</p>\n<h2 id=\"课后阅读\"><a href=\"#课后阅读\" class=\"headerlink\" title=\"课后阅读\"></a>课后阅读</h2><p><a href=\"https://developer.android.google.cn/develop/ui/views/layout/custom-views/custom-components?hl=zh-cn\">https://developer.android.google.cn/develop/ui/views/layout/custom-views/custom-components?hl=zh-cn</a></p>\n","feature":true,"text":"安卓实训第八天内容笔记 —— View的原理与自定义UI的实现...","permalink":"/post/Android-Day8","photos":[],"count_time":{"symbolsCount":"8.3k","symbolsTime":"8 mins."},"categories":[{"name":"安卓","slug":"安卓","count":7,"path":"api/categories/安卓.json"}],"tags":[{"name":"Android","slug":"Android","count":7,"path":"api/tags/Android.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#View%E7%9A%84%E5%8E%9F%E7%90%86%E4%B8%8E%E8%87%AA%E5%AE%9A%E4%B9%89UI%E7%9A%84%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">View的原理与自定义UI的实现</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81View%E7%BB%98%E5%88%B6%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">一、View绘制过程</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Activity%E5%92%8CView%E7%9A%84%E5%85%B3%E7%B3%BB\"><span class=\"toc-text\">Activity和View的关系</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E7%8E%B0%E7%95%8C%E9%9D%A2\"><span class=\"toc-text\">实现界面</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BB%98%E5%88%B6%E7%95%8C%E9%9D%A2\"><span class=\"toc-text\">绘制界面</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B8%83%E5%B1%80%E6%A0%91%E9%80%90%E7%BA%A7%E5%90%91%E4%B8%8B%E8%B0%83%E7%94%A8\"><span class=\"toc-text\">布局树逐级向下调用</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%8D%E7%BD%AE%E7%9A%84%E6%8F%8F%E8%BF%B0%E4%BE%9D%E8%B5%96%E5%9D%90%E6%A0%87%E7%B3%BB\"><span class=\"toc-text\">位置的描述依赖坐标系</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%8D%E7%BD%AE%E5%AE%9A%E4%B9%89\"><span class=\"toc-text\">位置定义</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AB%A0%E8%8A%82%E5%B0%8F%E7%BB%93\"><span class=\"toc-text\">章节小结</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89View\"><span class=\"toc-text\">二、自定义View</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A1%88%E4%BE%8B\"><span class=\"toc-text\">案例</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#draw%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">draw函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#draw%E5%87%BD%E6%95%B07%E4%B8%AA%E7%BB%98%E5%88%B6%E6%AD%A5%E9%AA%A4\"><span class=\"toc-text\">draw函数7个绘制步骤</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#onDraw%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">onDraw函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#draw%E5%87%BD%E6%95%B0%E5%92%8ConDraw%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">draw函数和onDraw函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BB%98%E5%88%B6%E5%86%85%E5%AE%B9%E5%9C%A8%E7%BB%99%E5%AE%9A%E7%9A%84Canvas%E4%B8%8A\"><span class=\"toc-text\">绘制内容在给定的Canvas上</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Paint%E7%B1%BB%E9%85%8D%E5%90%88%E6%8F%90%E4%BE%9B%E7%BB%98%E5%88%B6%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">Paint类配合提供绘制参数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Path%E7%B1%BB%E9%85%8D%E5%90%88%E6%8F%8F%E8%BF%B0%E5%A4%8D%E6%9D%82%E5%9B%BE%E5%BD%A2\"><span class=\"toc-text\">Path类配合描述复杂图形</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AB%A0%E8%8A%82%E5%B0%8F%E7%BB%93-1\"><span class=\"toc-text\">章节小结</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BB%83%E4%B9%A0\"><span class=\"toc-text\">练习</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89ViewGroup\"><span class=\"toc-text\">三、自定义ViewGroup</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#measure%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">measure函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#onMeasure%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">onMeasure函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#measure%E5%87%BD%E6%95%B0%E5%92%8ConMeasure%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">measure函数和onMeasure函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">问题</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#MeasureSpec%E7%B1%BB\"><span class=\"toc-text\">MeasureSpec类</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B5%8B%E9%87%8F%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">测量模式</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B0%8F%E7%BB%93\"><span class=\"toc-text\">小结</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9C%A8%E5%B8%83%E5%B1%80%E6%97%B6%E9%9C%80%E8%A6%81%E9%87%8D%E5%86%99%E6%8E%A7%E4%BB%B6%E7%9A%84%E5%B8%83%E5%B1%80%E5%8F%82%E6%95%B0layout-width%EF%BC%8Clayout-height\"><span class=\"toc-text\">在布局时需要重写控件的布局参数layout_width，layout_height</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#ViewGroup%E4%B8%ADMeasureSpec%E8%AE%A1%E7%AE%97%E5%85%AC%E5%BC%8F\"><span class=\"toc-text\">ViewGroup中MeasureSpec计算公式</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A0%B9%E5%B8%83%E5%B1%80DecorView%E7%9A%84%E6%B5%8B%E9%87%8F%E8%A6%81%E6%B1%82%EF%BC%9A%E7%AA%97%E5%8F%A3%E5%A4%A7%E5%B0%8F-%E7%AA%97%E5%8F%A3%E5%B8%83%E5%B1%80%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">根布局DecorView的测量要求：窗口大小+窗口布局参数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%96%91%E9%97%AE\"><span class=\"toc-text\">疑问</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A0%B9%E6%8D%AE%E5%BD%93%E5%89%8DViewGroup%E5%B8%83%E5%B1%80%E7%AD%96%E7%95%A5%E8%AE%A1%E7%AE%97%E5%A5%BD%E8%87%AA%E5%B7%B1%E7%9A%84%E5%AE%BD%E9%AB%98\"><span class=\"toc-text\">根据当前ViewGroup布局策略计算好自己的宽高</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#layout%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">layout函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#onLayout%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">onLayout函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#layout%E5%87%BD%E6%95%B0%E5%92%8ConLayout%E5%87%BD%E6%95%B0%E5%8C%BA%E5%88%AB\"><span class=\"toc-text\">layout函数和onLayout函数区别</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E5%9C%A8%E6%B5%8B%E9%87%8F%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%AD%98%E5%82%A8%E7%9A%84%E5%AD%90View%E5%B0%BA%E5%AF%B8\"><span class=\"toc-text\">使用在测量过程中存储的子View尺寸</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E5%9C%A8%E6%B5%8B%E9%87%8F%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%AD%98%E5%82%A8%E7%9A%84%E5%AD%90View%E5%B0%BA%E5%AF%B8%E6%9D%A5%E5%AE%8C%E6%88%90\"><span class=\"toc-text\">使用在测量过程中存储的子View尺寸来完成</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#getMeasuredHeight%E5%92%8CgetHeight%E7%9A%84%E5%8C%BA%E5%88%AB\"><span class=\"toc-text\">getMeasuredHeight和getHeight的区别</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#getMeasuredHeight%E5%92%8CgetHeight%E7%9A%84%E5%8C%BA%E5%88%AB-1\"><span class=\"toc-text\">getMeasuredHeight和getHeight的区别</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%B0%8F%E7%BB%93-1\"><span class=\"toc-text\">小结</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BB%83%E4%B9%A0-1\"><span class=\"toc-text\">练习</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A6%82%E4%BD%95%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE%E9%97%B4%E8%B7%9D\"><span class=\"toc-text\">如何定义标签间距?</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7\"><span class=\"toc-text\">自定义属性</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%B1%9E%E6%80%A7%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">属性类型</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E5%B1%9E%E6%80%A7\"><span class=\"toc-text\">使用属性</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AB%A0%E8%8A%82%E5%B0%8F%E7%BB%93-2\"><span class=\"toc-text\">章节小结</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81%E5%93%8D%E5%BA%94%E6%89%8B%E5%8A%BF%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">四、响应手势操作</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9C%89%E5%93%AA%E4%BA%9B%E6%89%8B%E5%8A%BF%EF%BC%9F\"><span class=\"toc-text\">有哪些手势？</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#MotionEvent%E7%B1%BB\"><span class=\"toc-text\">MotionEvent类</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%92%8C%E4%BA%8B%E4%BB%B6%E4%BD%8D%E7%BD%AE\"><span class=\"toc-text\">事件类型和事件位置</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%B0%8F%E7%BB%93-2\"><span class=\"toc-text\">小结</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%89%8B%E5%8A%BF%E5%88%86%E5%8F%91%E5%8F%8A%E5%93%8D%E5%BA%94%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">手势分发及响应过程</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%89%8B%E5%8A%BF%E5%88%86%E5%8F%91%E5%8F%8A%E5%93%8D%E5%BA%94%E8%BF%87%E7%A8%8B%EF%BC%9AView%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">手势分发及响应过程：View处理流程</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%89%8B%E5%8A%BF%E5%88%86%E5%8F%91%E5%8F%8A%E5%93%8D%E5%BA%94%E8%BF%87%E7%A8%8B%EF%BC%9AViewGroup%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">手势分发及响应过程：ViewGroup处理流程</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%B0%8F%E7%BB%93-3\"><span class=\"toc-text\">小结</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#GestureDetector%E7%B1%BB\"><span class=\"toc-text\">GestureDetector类</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#GestureDetector%E7%B1%BB-%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">GestureDetector类-使用</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#GestureDetector-OnDoubleTapListener\"><span class=\"toc-text\">GestureDetector#OnDoubleTapListener</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#ScaleGestureDetector%E7%B1%BB\"><span class=\"toc-text\">ScaleGestureDetector类</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BB%83%E4%B9%A0-2\"><span class=\"toc-text\">练习</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%86%85%E5%AE%B9%E5%9B%9E%E9%A1%BE\"><span class=\"toc-text\">内容回顾</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A\"><span class=\"toc-text\">课后作业</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AF%BE%E5%90%8E%E9%98%85%E8%AF%BB\"><span class=\"toc-text\">课后阅读</span></a></li></ol></li></ol>","author":{"name":"ChenZheng","slug":"chenzheng","avatar":"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/cover/avatar.jpg","link":"https://github.com/sjwusj","description":"Think like an artist, code like an artisan.","socials":{"github":"https://github.com/sjwusj","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Android_Day9","uid":"35c62650c1bf7b38efffc0a7332ce550","slug":"Android-Day9","date":"2024-04-27T23:54:41.000Z","updated":"2024-04-29T00:01:52.203Z","comments":true,"path":"api/articles/Android-Day9.json","keywords":null,"cover":"image/cover3.jpg","text":"安卓实训第九天内容笔记 —— Android的权限，Android的HTTP请求...","permalink":"/post/Android-Day9","photos":[],"count_time":{"symbolsCount":"16k","symbolsTime":"15 mins."},"categories":[{"name":"安卓","slug":"安卓","count":7,"path":"api/categories/安卓.json"}],"tags":[{"name":"Android","slug":"Android","count":7,"path":"api/tags/Android.json"}],"author":{"name":"ChenZheng","slug":"chenzheng","avatar":"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/cover/avatar.jpg","link":"https://github.com/sjwusj","description":"Think like an artist, code like an artisan.","socials":{"github":"https://github.com/sjwusj","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"Android_Day7","uid":"4f8e02efed9740b74bd2c4b8b52278c1","slug":"Android-Day7","date":"2024-04-25T23:57:08.000Z","updated":"2024-04-26T12:49:26.543Z","comments":true,"path":"api/articles/Android-Day7.json","keywords":null,"cover":"image/cover3.jpg","text":"安卓实训第七天内容笔记 —— Android动画的基本概念和原理...","permalink":"/post/Android-Day7","photos":[],"count_time":{"symbolsCount":"8.3k","symbolsTime":"8 mins."},"categories":[{"name":"安卓","slug":"安卓","count":7,"path":"api/categories/安卓.json"}],"tags":[{"name":"Android","slug":"Android","count":7,"path":"api/tags/Android.json"}],"author":{"name":"ChenZheng","slug":"chenzheng","avatar":"https://cdn.jsdelivr.net/gh/sjwusj/imgbed@main/cover/avatar.jpg","link":"https://github.com/sjwusj","description":"Think like an artist, code like an artisan.","socials":{"github":"https://github.com/sjwusj","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}